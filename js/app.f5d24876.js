(function(){var t={6514:function(t,e,a){"use strict";var r=a(144),s=function(){var t=this,e=t._self._c;return e("router-view")},i=[],o={name:"App",data:()=>({}),components:{}},n=o,l=a(3736),c=(0,l.Z)(n,s,i,!1,null,null,null),d=c.exports,u=a(8345),m=function(){var t=this,e=t._self._c;return e("v-app",[t.isOnline?e("div",{staticClass:"padre"},[e("div",{staticClass:"logo red darken-4 d-flex justify-center align-center"},[e("v-img",{staticClass:"mx-auto",attrs:{src:t.logo,alt:"logo UTA",contain:"",height:"500"}})],1),e("div",{staticClass:"login"},[e("div",{staticClass:"contenedor"},[e("div",[e("h1",{staticClass:"text-center miTitulo"},[t._v("Inicio de sesión")])]),e("hr",{staticStyle:{"background-color":"#f48B5e",height:"3px"}}),e("FormularioLogin")],1)])]):t._e()])},h=[],p=function(){var t=this,e=t._self._c;return e("v-content",[e("v-container",[e("v-form",{on:{submit:t.login}},[e("v-text-field",{attrs:{rules:t.controlUser,label:"Usuario","prepend-icon":"mdi-account"},model:{value:t.user,callback:function(e){t.user=e},expression:"user"}}),e("v-text-field",{attrs:{rules:t.controlPass,label:"Contraseña",type:"password","prepend-icon":"mdi-lock"},model:{value:t.pass,callback:function(e){t.pass=e},expression:"pass"}}),e("v-btn",{staticClass:"primary mt-3",attrs:{block:""},on:{click:t.methodLogin}},[t._v("Iniciar Sesión")]),e("div",{staticStyle:{"margin-top":"20px"}},[e("a",{staticClass:"mail",on:{click:function(e){t.cambioContraseña()}}},[t._v("¿Has olvidado la contraseña?")])])],1)],1)],1)},g=[],v=a(629),C=a(1354),f=a.n(C),b=a(5247),P={name:"FormUser",data:()=>({user:"",pass:"",message:"",controlUser:[t=>!!t||"Debes ingresar un Usuario"],controlPass:[t=>!!t||"Debes ingresar una Contraseña"]}),created(){this.cargarSubCarpetas()},methods:{...(0,v.nv)("Login",["login","validarCorreo","cambioContraseñaCorreo"]),...(0,v.nv)("SubCarpetas",["cargarSubCarpetas"]),"recuperarContraseña"(t,e){let a={to_email:t,message:e,from_name:"UTA Services"};b.ZP.send("service_jafj6oc","template_a6j4kwb",a,"_9AGnDi4yMhKta2Fh").then((t=>{this.$alertify.alert("Cambio de contraseña","Se ha enviado un correo con una contraseña temporal",(()=>this.$alertify.warning("alerta cerrada")))})).catch((t=>{this.$alertify.alert("Cambio de contraseña","El servicio no esta disponible",(()=>this.$alertify.warning("alerta cerrada")))}))},"generarContraseña"(){var t="abcdefghijklmnopqrstubwsyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890",e="";for(let a=0;a<10;a++)e+=t.charAt(Math.floor(Math.random()*t.length));return e},"cambioContraseña"(){this.$alertify.promptWithTitle("Recuperar contraseña","Digite su correo para poder seguir con el proceso"," ",(async(t,e)=>{try{if(""!=e){const t=await this.validarCorreo({correo:e});if(t){let t=this.generarContraseña(),a=f().SHA256(t).toString(),r=await this.cambioContraseñaCorreo({correo:e,newPass:a});r?this.recuperarContraseña(e,t):this.$alertify.error("Error con el servidor")}else this.$alertify.error("El correo ingresado no existe")}else this.$alertify.error("Ingrese un correo válido")}catch(a){console.error("Error:",a)}}),(()=>this.$alertify.error("cancel")))},methodLogin:async function(){let t=f().SHA256(this.pass).toString();await this.login({user:this.user,pass:t});const e=localStorage.getItem("Authentication");e?this.$router.push("/Estudiantes"):this.$alertify.error("Usuario no encontrado")}},computed:{...(0,v.Se)("Login",["getUser","getAuthentication","getSms"])}},I=P,S=(0,l.Z)(I,p,g,!1,null,null,null),y=S.exports,A={data(){return{logo:a(1637),isOnline:navigator.onLine}},created(){window.addEventListener("online",this.handleConnectionChange),window.addEventListener("offline",this.handleConnectionChange);const t="true"===localStorage.getItem("Authentication");t&&this.$router.push("/Estudiantes")},destroyed(){window.removeEventListener("online",this.handleConnectionChange),window.removeEventListener("offline",this.handleConnectionChange)},methods:{handleConnectionChange(){this.isOnline=navigator.onLine,this.isOnline||(console.log("algo"),this.$router.push("/SinConexion"))}},components:{FormularioLogin:y}},w=A,E=(0,l.Z)(w,m,h,!1,null,null,null),_=E.exports,U=function(){var t=this,e=t._self._c;return e("v-app",[e("NavBar",{attrs:{nombreUser:t.NomCom,imgUser:t.imgProfile}}),e("v-content",{staticClass:"ma-4"},[e("router-view")],1),e("Footer")],1)},D=[],x=function(){var t=this,e=t._self._c;return e("nav",[e("div",[e("CambioPass",{attrs:{dialog:t.dailogContra,ItemPass:t.datosPass}})],1),e("v-app-bar",{attrs:{app:"",color:"red darken-4",dark:""}},[e("v-app-bar-nav-icon",{on:{click:function(e){e.stopPropagation(),t.drawer=!t.drawer}}}),e("v-spacer"),e("v-btn",{attrs:{text:""}},[e("div",{staticClass:"flex",staticStyle:{display:"flex","flex-direction":"column",padding:"10px","font-size":"100%"}},[e("span",{staticClass:"mr-2"},[t._v("UNIVERSIDAD TECNICA DE AMBATO")]),e("span",{staticClass:"mr-2"},[t._v("FACULTAD DE INGENIERÍA EN SISTEMAS, ELECTRÓNICA E INDUSTRIAL")])]),e("v-img",{attrs:{src:t.logo,alt:"logo UTA",contain:"",height:"60"}})],1)],1),e("v-navigation-drawer",{staticClass:"red darken-4",attrs:{dark:"",app:"",height:"100%"},scopedSlots:t._u([{key:"append",fn:function(){return[e("div",{staticClass:"pa-2"},[e("v-btn",{attrs:{block:""},on:{click:function(e){return e.stopPropagation(),t.salir()}}},[e("span",{staticClass:"mr-2"},[t._v("Salir")]),e("v-icon",[t._v("mdi-exit-to-app")])],1)],1)]},proxy:!0}]),model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[e("v-card",{staticClass:"mx-auto",attrs:{"min-height":"70px"}},[e("v-list-item",[e("v-layout",{attrs:{column:""}},[e("v-avatar",{staticClass:"mt-2 mx-auto",attrs:{color:"surface-variant ",size:"70"}},[e("v-img",{staticStyle:{"background-color":"white"},attrs:{src:null!=t.imgUser?t.imgUser:t.imgAux,alt:"John"}})],1),e("v-card-text",{staticClass:"text-center",staticStyle:{"font-size":"24px"}},[e("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e("v-btn",t._g({attrs:{color:"red darken-4"}},a),[t._v(t._s(t.nombreUser)+" "),e("v-icon",{attrs:{right:""}},[t._v("mdi-cog")])],1)]}}]),model:{value:t.showMenu,callback:function(e){t.showMenu=e},expression:"showMenu"}},[e("v-list",{staticStyle:{height:"65px"}},t._l(t.btnOP,(function(a){return e("v-list-item",{key:a.text,on:{click:function(e){return t.openChangePass()}}},[e("v-list-item-icon",[e("v-icon",{attrs:{color:"blue darken-4"}},[t._v("mdi-"+t._s(a.icon))])],1),e("v-list-item-content",[e("div",[t._v(t._s(a.text))])])],1)})),1)],1)],1)],1)],1)],1),e("v-divider"),e("v-list",{attrs:{density:"compact",flat:"",nav:""}},t._l(t.navegacion,(function(a){return e("v-list-item",{key:a.text,staticClass:"opNav",staticStyle:{"margin-bottom":"1px solid white"},attrs:{router:"",to:a.route}},[e("v-list-item-icon",[e("v-icon",{attrs:{size:"35"}},[t._v("mdi-"+t._s(a.icon))])],1),e("v-list-item-content",[e("v-list-item-title",{staticStyle:{"font-size":"22px","font-weight":"bold"}},[t._v(t._s(a.text))])],1)],1)})),1)],1)],1)},N=[],O=function(){var t=this,e=t._self._c;return e("v-row",{attrs:{justify:"center"}},[e("v-dialog",{attrs:{persistent:"",width:"400"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e("v-card",[e("v-card-title",[e("span",{staticClass:"text-h5"},[t._v("Cambiar Contraseña")]),e("v-spacer")],1),e("v-card-text",[e("v-container",[e("v-row",[e("v-col",{attrs:{cols:"12"}},[e("v-text-field",{attrs:{label:"Nueva contraseña*",type:"password",rules:t.controles().controlContra,required:""},model:{value:t.ItemPass.contra1,callback:function(e){t.$set(t.ItemPass,"contra1",e)},expression:"ItemPass.contra1"}})],1),e("v-col",{attrs:{cols:"12"}},[e("v-text-field",{attrs:{label:"Repetir nueva contraseña*",type:"password",rules:t.controles().controlContra,required:""},model:{value:t.ItemPass.contra2,callback:function(e){t.$set(t.ItemPass,"contra2",e)},expression:"ItemPass.contra2"}})],1)],1)],1)],1),e("v-card-actions",[e("v-spacer"),e("v-btn",{attrs:{color:"blue-darken-1",variant:"text"},on:{click:function(e){return t.cerrarDialog()}}},[t._v(" Close ")]),e("v-btn",{attrs:{color:"blue-darken-1",variant:"text"},on:{click:function(e){return t.agregar()}}},[t._v(" Save ")])],1)],1)],1)],1)},k=[],$={name:"CambioContraseña",props:{dialog:Boolean,ItemPass:{}},data(){return{}},methods:{...(0,v.OI)("Dialogo",["setDailogContra"]),...(0,v.nv)("Login",["cambioContraseñaCorreo"]),controles(){return{controlContra:[t=>!!t||"Ingrese una contraseña"]}},agregar:async function(){this.verificarCampos()?this.verificarContras()?(this.cambiarPass(),this.cerrarDialog()):this.$alertify.error("Las contraseñas no son iguales"):this.$alertify.error("Complete los campos")},cambiarPass:async function(){const t=JSON.parse(localStorage.getItem("user")),e=t.Correo;let a=f().SHA256(this.ItemPass.contra2).toString(),r=await this.cambioContraseñaCorreo({correo:e,newPass:a});return r?this.$alertify.success("Contraseña Cambiada"):this.$alertify.error("No se pudo cambiar la contraseña")},verificarCampos(){return""!=this.ItemPass.contra1&&""!=this.ItemPass.contra2},verificarContras(){return this.ItemPass.contra1==this.ItemPass.contra2},cerrarDialog(){this.setDailogContra(!1)}},computed:{}},T=$,B=(0,l.Z)(T,O,k,!1,null,null,null),F=B.exports,R={name:"NavBar",props:["imgUser","nombreUser"],data(){return{fav:!0,menu:!1,message:!1,hints:!0,drawer:!0,rolUser:null,showMenu:!1,logo:a(1637),imgAux:a(2315),navegacion:[],btnOP:[{icon:"key-change",text:"Cambiar contraseña",show:"true"}],datosPass:{}}},created(){const t=JSON.parse(localStorage.getItem("Authentication"));if(t){const t=JSON.parse(localStorage.getItem("user"));this.rolUser=t.IdRolPer;t.IdRolPer;this.roles()}},methods:{...(0,v.OI)("Dialogo",["setDailogContra"]),salir(){localStorage.removeItem("user"),localStorage.removeItem("Authentication"),this.$router.push("/")},roles(){1==this.rolUser?this.navegacion=[{icon:"account-circle ",text:"Usuarios",route:"/Usuarios"},{icon:"school",text:"Carreras",route:"/Carreras"},{icon:"folder",text:"Estudiantes",route:"/Estudiantes"},{icon:"view-dashboard",text:"Plantillas",route:"/Plantillas"},{icon:"chart-pie",text:"Reportes",route:"/Reportes"}]:this.navegacion=[{icon:"folder",text:"Estudiantes",route:"/Estudiantes"},{icon:"chart-pie",text:"Reportes",route:"/Reportes"}]},openChangePass(){this.datosPass={contra1:"",contra2:""},this.setDailogContra(!0)},mostrarNotificaciones(){}},computed:{...(0,v.rn)("Dialogo",["dailogContra"]),...(0,v.Se)("Carreras",["getCarrerasUser"]),...(0,v.Se)("Login",["getNotificaciones"])},components:{CambioPass:F}},z=R,L=(0,l.Z)(z,x,N,!1,null,null,null),J=L.exports,Z=function(){var t=this,e=t._self._c;return e("v-footer",{attrs:{dark:"",padless:"",app:"",inset:""}},[e("v-card",{staticClass:"flex",attrs:{flat:"",tile:"",color:"reed",elevation:10}},[e("v-card-text",{staticClass:"py-2 white--text text-center"},[t._v(" © "+t._s((new Date).getFullYear())+" - "),e("strong",[t._v("MartechSolution")])])],1)],1)},j=[],M={},V=M,W=(0,l.Z)(V,Z,j,!1,null,null,null),G=W.exports,q={name:"Dashboard",data:()=>({imgProfile:null,NomCom:null}),components:{NavBar:J,Footer:G},created(){const t="true"===localStorage.getItem("Authentication");if(t){const t=JSON.parse(localStorage.getItem("user"));this.NomCom=t.NomUser+" "+t.ApeUser,this.setUser(t),this.cargarSubCarpetas()}else this.$router.push("/")},methods:{...(0,v.OI)("Login",["setUser"]),...(0,v.nv)("SubCarpetas",["cargarSubCarpetas"])},computed:{...(0,v.Se)("Login",["getUser","getAuthentication"])}},H=q,Y=(0,l.Z)(H,U,D,!1,null,null,null),K=Y.exports,Q=function(){var t=this,e=t._self._c;return e("div",[1==t.tablaEst||1==t.tablaArch?e("BtnOpciones",{staticClass:"mb-2",attrs:{links:t.btnOP,dark:""}}):t._e(),e("v-breadcrumbs",t._l(t.itemsBread,(function(a,r){return e("v-breadcrumbs-item",{key:r,staticClass:"BreadCumbs",staticStyle:{"font-size":"15px"},on:{click:function(e){return t.acciones(a)}}},[t._v(" "+t._s(a)+" "),r<t.itemsBread.length-1?e("span",{staticStyle:{color:"red","font-size":"15x"}},[t._v(" / ")]):t._e()])})),1),e("Carreras",{attrs:{show:t.carreras,Titulo:"CARRERAS",Cabecera:t.CabeceraCarreras,Items:t.getCarrerasUser}}),e("TablaEst",{attrs:{show:t.tablaEst,Titulo:"ESTUDIANTES ",Cabecera:t.Cabecera,Items:t.getItems}}),e("TablaDir_Arch",{attrs:{show:t.tablaArch,Titulo:t.itemsBread[2],Cabecera:t.Cabecera2,ItemsArchivos:t.getCarpetas}})],1)},X=[],tt=function(){var t=this,e=t._self._c;return e("div",[e("NuevoEstudiante",{attrs:{dialog:t.dialogFolder,ItemEstudiante:t.dataEst}}),e("NuevaCarpeta",{attrs:{dialog:t.dailogCarpeta,ItemCarpeta:t.dataCarpeta}}),e("SubirArchivo",{attrs:{dialog:t.dialogFile,ItemArchivo:t.dataObsArch},on:{dialog:function(e){t.dialogFile=e}}}),e("NuevaUsuario",{attrs:{dialog:t.dialogUser,ItemUsuario:t.dataUsuario}}),e("NuevaPlantilla",{attrs:{dialog:t.dailogPlantilla,ItemPlantilla:t.dataPlan}}),e("progres",{attrs:{dialog:t.dailogProgres,message:t.sms}}),e("input",{ref:"inputFile",staticStyle:{display:"none"},attrs:{id:"archivoExcel",type:"file"},on:{change:t.subirExcel}}),e("v-container",{staticClass:"mt-5"},[e("v-menu",{attrs:{"offset-y":"",transition:"scroll-x-transition"},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e("v-btn",t._g({attrs:{color:"primary"}},a),[t._v("Opciones "),e("v-icon",{attrs:{right:""}},[t._v("mdi-menu-down")])],1)]}}]),model:{value:t.showMenu,callback:function(e){t.showMenu=e},expression:"showMenu"}},[e("v-list",t._l(t.links,(function(a){return e("v-list-item",{key:a.text,on:{click:function(e){return t.optionSelected(a.text)}}},[e("v-list-item-icon",[e("v-icon",{attrs:{color:"blue darken-4"}},[t._v("mdi-"+t._s(a.icon))])],1),e("v-list-item-content",[e("v-list-item-title",[t._v(t._s(a.text))])],1)],1)})),1)],1)],1)],1)},et=[],at=function(){var t=this,e=t._self._c;return e("v-row",{attrs:{justify:"center"}},[e("progres",{attrs:{dialog:t.dailogCrearEst,message:t.sms}}),e("v-dialog",{attrs:{persistent:"",width:"450"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e("v-card",[e("v-card-title",[0==t.ItemEstudiante.IdEst?e("span",{staticClass:"text-h5"},[t._v("Estudiante Nuevo")]):t._e(),e("v-spacer")],1),e("v-card-text",[e("v-container",[e("v-row",[e("v-col",{attrs:{cols:"12"}},[e("v-text-field",{attrs:{label:"Cedula*",rules:[t.controles().controlCed,t.cedulaLengthRule],maxlength:"10",counter:10,required:""},on:{change:function(e){return t.buscarEstudianteCed()}},model:{value:t.ItemEstudiante.Cedula,callback:function(e){t.$set(t.ItemEstudiante,"Cedula",e)},expression:"ItemEstudiante.Cedula"}})],1),e("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[e("v-text-field",{attrs:{label:"Nombres Completos*",maxlength:"30",rules:t.controles().controlNom,required:""},model:{value:t.ItemEstudiante.NomEst,callback:function(e){t.$set(t.ItemEstudiante,"NomEst",e)},expression:"ItemEstudiante.NomEst"}})],1),e("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[e("v-text-field",{attrs:{label:"Apellidos Completos*",maxlength:"30",rules:t.controles().controlApe,required:""},model:{value:t.ItemEstudiante.ApeEst,callback:function(e){t.$set(t.ItemEstudiante,"ApeEst",e)},expression:"ItemEstudiante.ApeEst"}})],1),0==t.ItemEstudiante.IdEst?e("v-col",{attrs:{cols:"12"}},[e("v-select",{attrs:{rules:t.controles().controlPlan,items:t.getPlantillas,"item-text":"NomPlan","item-value":"IdPlan",label:"Plantillas*",required:""},model:{value:t.ItemEstudiante.idPlanPer,callback:function(e){t.$set(t.ItemEstudiante,"idPlanPer",e)},expression:"ItemEstudiante.idPlanPer"}})],1):t._e(),t._v(" "+t._s(t.auxItemsPlan)+" ")],1)],1)],1),e("v-card-actions",[e("v-spacer"),e("v-btn",{attrs:{color:"secondary",variant:"text"},on:{click:function(e){return t.cerrarDialog()}}},[t._v(" Close ")]),e("v-btn",{attrs:{color:"primary",variant:"text"},on:{click:function(e){return t.agregar()}}},[t._v(" Save ")])],1)],1)],1)],1)},rt=[],st=function(){var t=this,e=t._self._c;return e("div",[e("v-dialog",{staticStyle:{height:"20px"},attrs:{persistent:!0},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e("div",{staticClass:"loading-container"},[e("v-progress-circular",{attrs:{color:"purple",indeterminate:"",size:100,width:6}}),e("div",[e("v-alert",{attrs:{type:"success",outlined:"",dense:"",color:"secondary darken-1"}},[t._v(t._s(t.message))])],1)],1)])],1)},it=[],ot={name:"Progres_Circular",props:{dialog:Boolean,message:""},data(){return{}},methods:{}},nt=ot,lt=(0,l.Z)(nt,st,it,!1,null,"d45dfac4",null),ct=lt.exports,dt={name:"nuevo",props:{dialog:Boolean,ItemEstudiante:{},auxItemsPlan:[]},data:()=>({path:"",sms:"Creando las carpetas para el estudiante..."}),created(){this.cargarCarreras(),this.cargarPlantillas()},methods:{...(0,v.nv)("Carreras",["cargarCarreras"]),...(0,v.nv)("Estudiantes",["AgregarEstudiante","cargarEstudiantes","buscarEstCedula"]),...(0,v.nv)("Server_Carpetas",["crearCarpeta","crearSubCarpeta"]),...(0,v.nv)("Plantillas",["cargarPlantillas","cargarItemsPlantillas"]),...(0,v.OI)("Dialogo",["setDialogFolder","setDailogCrearEst"]),cedulaLengthRule(t){return!t||10===t.length||"La cédula debe tener exactamente 10 dígitos"},controles(){return{controlCed:[t=>{if(!t)return"Ingrese una cédula";const e=/^\d+$/;return e.test(t)||"Ingrese solo números"}],controlNom:[t=>{if(!t)return"Ingrese los nombres del estudiante";const e=/^[a-zA-Z\s]+$/;return e.test(t)||"Ingrese solo letras"}],controlApe:[t=>{if(!t)return"Ingrese los apellidos del estudiante";const e=/^[a-zA-Z\s]+$/;return e.test(t)||"Ingrese solo letras"}],controlPlan:[t=>!!t||"Seleccione una plantilla"]}},agregar:async function(){try{if(""!==this.ItemEstudiante.Cedula&&""!==this.ItemEstudiante.NomEst&&""!==this.ItemEstudiante.ApeEst){this.rutaNueva();const t=JSON.parse(localStorage.getItem("user"));this.idUser=t.IdUser,this.itemsBread.length<3?(await this.AgregarEstudiante(this.ItemEstudiante),await this.crearCarpeta({datos:this.ItemEstudiante,path:this.path,oldPath:this.rutaAnterior}),0==this.ItemEstudiante.IdEst&&await this.crearSubDirectorios(this.ItemEstudiante,this.path),await this.cargarEstudiantes({idCar:this.idCarreraSelect,idUser:this.idUser})):(await this.crearCarpeta({datos:this.ItemEstudiante,path:this.path,oldPath:this.rutaAnterior}),await this.cargarEstudiantes({idCar:this.idCarreraSelect,idUser:this.idUser})),this.$alertify.success(0==this.ItemEstudiante.IdEst?"Estudiantre creado":"Estudiante Actualizado"),this.cerrarDialog(),this.path=""}else this.$alertify.error("Complete todos campos para llevar acabo el proceso")}catch(t){this.$alertify.error("Error al agregar estudiante:",t)}},crearSubDirectorios:async function(t,e){this.setDailogCrearEst(!0);try{await this.cargarItemsPlantillas(t);const a=this.getItemsPlantillas[0].Items,r=a.split(",");for(let s=0;s<r.length;s++)await this.crearSubCarpeta({datos:t,path:e,nombre:r[s]});this.setDailogCrearEst(!1)}catch(a){this.$alertify.error("Error al intentar crear una carpeta:",a)}},rutaNueva(){for(let t=0;t<this.itemsBread.length;t++)this.path+=this.itemsBread[t]+"/"},cerrarDialog(){this.setDialogFolder(!1)},buscarEstudianteCed:async function(){let t=this.validarCedula(this.ItemEstudiante.Cedula);if(t){let t=await this.buscarEstCedula({cedula:this.ItemEstudiante.Cedula});t&&this.$alertify.confirm(`El estudinate con cedula ${this.ItemEstudiante.Cedula} ya existe`,(()=>{this.ItemEstudiante.Cedula=""}),(()=>{this.cerrarDialog(),this.ItemEstudiante.Cedula="",this.$alertify.error("Cancelado")}))}else this.ItemEstudiante.Cedula="",this.$alertify.error("La cédula no es válida")},validarCedula(t){const e=t.substring(0,9),a=parseInt(t.charAt(9));let r=0;for(let o=0;o<9;o++){let t=parseInt(e.charAt(o));o%2===0&&(t*=2,t>9&&(t-=9)),r+=t}const s=r%10,i=0===s?0:10-s;return i===a},controlCedula(){let t=this.validarCedula(this.ItemEstudiante.Cedula);t?console.log("La cédula es válida."):console.log("La cédula no es válida.")}},components:{progres:ct},computed:{...(0,v.Se)("Carreras",["getCarreras"]),...(0,v.Se)("Plantillas",["getPlantillas","getItemsPlantillas"]),...(0,v.rn)("Dialogo",["itemsBread","dailogCrearEst"]),...(0,v.rn)("Carreras",["idCarreraSelect"]),...(0,v.rn)("Server_Carpetas",["rutaAnterior"])}},ut=dt,mt=(0,l.Z)(ut,at,rt,!1,null,null,null),ht=mt.exports,pt=function(){var t=this,e=t._self._c;return e("v-row",{attrs:{justify:"center"}},[e("progres2",{attrs:{dialog:t.dailogCarpetas,message:t.sms2}}),e("v-dialog",{attrs:{persistent:"",width:"400"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e("v-card",[e("v-card-title",[0==t.ItemCarpeta.IdEst?e("span",{staticClass:"text-h5"},[t._v("Nueva Carpeta")]):t._e(),e("v-spacer")],1),e("v-card-text",[e("v-container",[e("v-row",[e("v-col",{attrs:{cols:"12"}},[e("v-text-field",{attrs:{label:"Nombre*",rules:[t.controles().controlNom,t.controles().controlNombreArchivo],required:""},model:{value:t.ItemCarpeta.NomEst,callback:function(e){t.$set(t.ItemCarpeta,"NomEst",e)},expression:"ItemCarpeta.NomEst"}})],1)],1)],1)],1),e("v-card-actions",[e("v-spacer"),e("v-btn",{attrs:{color:"secondary",variant:"text"},on:{click:function(e){return t.cerrarDialog()}}},[t._v(" Close ")]),e("v-btn",{attrs:{color:"primary",variant:"text"},on:{click:function(e){return t.agregar()}}},[t._v(" Save ")])],1)],1)],1)],1)},gt=[],vt={name:"nuevo",props:{dialog:Boolean,ItemCarpeta:{}},data:()=>({path:"",sms2:"Creando Item...",permisosDirectorios:new Map}),created(){},methods:{...(0,v.nv)("Server_Carpetas",["crearCarpeta","cargarCarpetas","crearSubCarpeta"]),...(0,v.OI)("Dialogo",["setDialogCarpeta","setDailogCarpetas"]),...(0,v.nv)("Plantillas",["AgregarItemsSubDirectorios","AgregarItemsDirectorios"]),...(0,v.nv)("Carreras",["cargarCarreras"]),...(0,v.nv)("Permisos",["AgregarUsuarioPermisosCarpeta","cargarPermisosDirectorios"]),...(0,v.nv)("SubCarpetas",["cargarSubCarpetas"]),controles(){return{controlNom:[t=>{if(!t)return"Ingrese un nombre";const e=/^[a-zA-Z\s._]+$/;return e.test(t)||"Ingrese solo letras"}],controlNombreArchivo:t=>{if(!t)return"Ingrese el nombre del archivo";const e=/\.txt$/i;if(!e.test(t))return"Mantener la extension del archivo en caso de que sea un archivo";const a=t.replace(e,"");return""===a||"No puedes modificar la extensión del archivo"}}},agregar:async function(){this.setDailogCarpetas(!0);try{if(""!=this.ItemCarpeta.NomEst){if(this.rutaNueva(),0==this.ItemCarpeta.IdEst){let t=this.path.split("/").filter(Boolean),e=t[t.length-2];this.getCarreras.some((({NomCar:t})=>t.toLowerCase()===e.toLowerCase()))?(await this.insertarItemSubCarpta(this.ItemCarpeta.NomEst),await this.crearSubDirectorios(this.path,this.ItemCarpeta.NomEst),await this.agregarPermisos(this.ItemCarpeta.NomEst),await this.cargarSubCarpetas(),await this.obtenerPermisosDirectorios()):await this.crearCarpeta({datos:this.ItemCarpeta,path:this.path,oldPath:this.rutaAnterior}),await this.cargarCarpetas(this.path),this.$alertify.success(0==this.ItemCarpeta.IdEst?"Carpeta creada":"Carpeta Actualizada")}else 1==this.ctlSubirArch||1==this.ctlfolder?(await this.crearCarpeta({datos:this.ItemCarpeta,path:this.path,oldPath:this.rutaAnterior}),this.$alertify.success(0==this.ItemCarpeta.IdEst?"Carpeta creada":"Archivo Actualizado")):this.$alertify.error("NO PUEDES CAMBIAR LOS NOMBRES DE ESTAS CARPETAS");await this.cargarCarpetas(this.path),this.cerrarDialog(),this.setDailogCarpetas(!1),this.path=""}else this.$alertify.error("Complete todos campos para llevar acabo el proceso")}catch(t){console.error("Error al agregar estudiante:",t),this.$alertify.error("Error al realizar la operación "+t)}},agregarPermisos:async function(t){try{const e=JSON.parse(localStorage.getItem("user")),a=e.IdUser;let r={IdUserPer:a,IdPerPer:1,IdItemSubPer:t},s=await this.AgregarUsuarioPermisosCarpeta(r);return s?this.$alertify.success("Permiso insertado"):this.$alertify.error("No se pudo insetar el permiso")}catch(e){this.$alertify.error("Error al realizar la operación "+e)}},insertarItemSubCarpta:async function(t){try{const e={idPlan:0,items:[t]};await this.AgregarItemsSubDirectorios(e)}catch(e){this.$alertify.error("Error al realizar la operación "+e)}},crearSubDirectorios:async function(t,e){try{for(let a=0;a<this.getEstudinates_Plantillas.length;a++){const r=this.getEstudinates_Plantillas[a];let s=t.split("/").filter(Boolean);s.pop();let i=s.join("/"),o=i.split("/").filter(Boolean);o.pop();let n=o.join("/");await this.crearSubCarpeta({datos:r,path:n+"/"+r.NomCar+"/",nombre:e})}}catch(a){this.$alertify.error("Error al realizar la operación "+a)}},rutaNueva(){for(let t=0;t<this.itemsBread.length;t++)this.path+=this.itemsBread[t]+"/"},cerrarDialog(){this.setDialogCarpeta(!1)},obtenerPermisosDirectorios:async function(){try{const t=JSON.parse(localStorage.getItem("user")),e=t.IdUser;await Promise.all(this.getSubCarpetas.map((async t=>{await this.cargarPermisosDirectorios({idUser:e,nomItem:t.NomItem}),this.permisosDirectorios.set(t.NomItem.toLowerCase(),this.getPermisosDirectorios[0].NomPer)})));const a=JSON.stringify(Array.from(this.permisosDirectorios.entries()));localStorage.setItem("PermisosSubDirectorios",a),console.log(this.permisosDirectorios)}catch(t){throw console.error("Error al obtener permisos de directorios:",t),t}}},components:{progres2:ct},computed:{...(0,v.rn)("Dialogo",["itemsBread","ctlSubirArch","ctlfolder","dailogCarpetas"]),...(0,v.rn)("Server_Carpetas",["rutaAnterior"]),...(0,v.rn)("Plantillas",["idEstPlan"]),...(0,v.Se)("Plantillas",["getEstudinates_Plantillas"]),...(0,v.Se)("SubCarpetas",["getSubCarpetas"]),...(0,v.Se)("Carreras",["getCarreras"]),...(0,v.Se)("Permisos",["getPermisosDirectorios"])}},Ct=vt,ft=(0,l.Z)(Ct,pt,gt,!1,null,null,null),bt=ft.exports,Pt=function(){var t=this,e=t._self._c;return e("v-row",{attrs:{justify:"center"}},[e("div",[e("progres",{attrs:{dialog:t.dailogSubirArch,message:t.sms}})],1),e("v-dialog",{attrs:{persistent:"",width:"600"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e("v-card",[e("v-card-title",[e("span",{staticClass:"text-h5"},[t._v("Subir Archivo")]),e("v-spacer")],1),e("v-card-text",[e("v-container",[e("v-row",[e("v-col",{attrs:{cols:"12"}},[e("input",{ref:"fileInput",attrs:{type:"file"},on:{change:t.handleFileChange}})]),e("v-col",{attrs:{cols:"12"}},[e("v-text-field",{attrs:{label:"Observación"},model:{value:t.obsAux,callback:function(e){t.obsAux=e},expression:"obsAux"}})],1)],1)],1)],1),e("v-card-actions",[e("v-spacer"),e("v-btn",{attrs:{color:"blue-darken-1",variant:"text"},on:{click:t.cerrarDialog}},[t._v(" Close ")]),e("v-btn",{attrs:{color:"blue-darken-1",variant:"text"},on:{click:t.agregar}},[t._v(" Save ")])],1)],1)],1)],1)},It=[],St={name:"nuevo",props:{dialog:Boolean},data(){return{ItemArchivo:{},selectedFile:null,obsAux:"",sms:"Subiendo archivo...",path:""}},created(){},methods:{...(0,v.nv)("Server_Archivos",["crearArchivos","crearObsArchivos"]),...(0,v.nv)("Server_Carpetas",["cargarCarpetas"]),...(0,v.OI)("Dialogo",["setDailogSubirArch"]),agregar:async function(){this.setDailogSubirArch(!0);try{this.rutaNueva(),await Promise.all([this.crearArchivos({ruta:this.path,archivo:this.selectedFile}),this.crearObsArchivos({ruta:this.path+this.selectedFile.name,observacion:this.obsAux,idEstPer:this.idEst})]),await this.cargarCarpetas(this.path),this.$alertify.success("Archivo Insertado"),this.cerrarDialog(),this.path=""}catch(t){this.$alertify.success("Error al internar insertar un archivo "+t)}this.setDailogSubirArch(!1)},cerrarDialog(){this.$emit("dialog",!1)},handleFileChange(t){if(this.selectedFile=t.target.files[0],this.selectedFile){this.selectedFile}},rutaNueva(){for(let t=0;t<this.itemsBread.length;t++)this.path+=this.itemsBread[t]+"/"}},components:{progres:ct},computed:{...(0,v.rn)("Dialogo",["itemsBread","dailogSubirArch"]),...(0,v.rn)("Server_Carpetas",["rutaAnterior"]),...(0,v.rn)("Estudiantes",["dataEst","idEst"])}},yt=St,At=(0,l.Z)(yt,Pt,It,!1,null,null,null),wt=At.exports,Et=function(){var t=this,e=t._self._c;return e("v-row",{attrs:{justify:"center"}},[e("v-dialog",{attrs:{persistent:"",width:"1024"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e("v-card",[e("v-card-title",[e("span",{staticClass:"text-h5"},[t._v("Nuevo Usuario")])]),e("v-card-text",[e("v-container",[e("v-row",[e("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[e("v-text-field",{attrs:{label:"Nombre*",rules:t.controles().controlNom,required:""},model:{value:t.ItemUsuario.nombre,callback:function(e){t.$set(t.ItemUsuario,"nombre",e)},expression:"ItemUsuario.nombre"}})],1),e("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[e("v-text-field",{attrs:{label:"Apellido*",rules:t.controles().controlApe,required:""},model:{value:t.ItemUsuario.apellido,callback:function(e){t.$set(t.ItemUsuario,"apellido",e)},expression:"ItemUsuario.apellido"}})],1),e("v-col",{attrs:{cols:"12"}},[e("v-text-field",{attrs:{label:"Email*",type:"email",rules:t.controles().controlCor,required:""},on:{change:function(e){return t.validarC()}},model:{value:t.ItemUsuario.correo,callback:function(e){t.$set(t.ItemUsuario,"correo",e)},expression:"ItemUsuario.correo"}})],1),e("v-col",{attrs:{cols:"12"}},[e("v-text-field",{attrs:{disabled:0!==t.ItemUsuario.id,label:"Password*",type:"password",rules:t.controles().controlCon,required:""},model:{value:t.ItemUsuario.contraseña,callback:function(e){t.$set(t.ItemUsuario,"contraseña",e)},expression:"ItemUsuario.contraseña"}})],1),e("v-col",{attrs:{cols:"12",sm:"4"}},[e("v-select",{attrs:{rules:t.controles().controlRol,items:t.getRoles,"item-text":"NomRol","item-value":"IdRol",label:"Roles*",required:""},model:{value:t.ItemUsuario.rol,callback:function(e){t.$set(t.ItemUsuario,"rol",e)},expression:"ItemUsuario.rol"}})],1),e("v-col",{staticStyle:{display:"none"},attrs:{cols:"12",sm:"4"}},[e("v-autocomplete",{attrs:{items:t.getPermisos,"item-text":"nomPer","item-value":"IdPer",label:"Permisos*",multiple:""},model:{value:t.ItemUsuario.permisos,callback:function(e){t.$set(t.ItemUsuario,"permisos",e)},expression:"ItemUsuario.permisos"}})],1),e("v-col",{attrs:{cols:"12",sm:"4"}},[e("v-autocomplete",{attrs:{rules:t.controles().controlCar,items:t.getCarreras,"item-text":"NomCar","item-value":"IdCar",label:"Carreras*",multiple:""},model:{value:t.ItemUsuario.carreras,callback:function(e){t.$set(t.ItemUsuario,"carreras",e)},expression:"ItemUsuario.carreras"}})],1)],1)],1),e("small",[t._v("*indicates required field")])],1),e("v-card-actions",[e("v-spacer"),e("v-btn",{attrs:{color:"secondary",variant:"text"},on:{click:t.cerrarDialog}},[t._v(" Close ")]),e("v-btn",{attrs:{color:"primary",variant:"text"},on:{click:t.agregar}},[t._v(" Save ")])],1)],1)],1)],1)},_t=[],Ut={name:"nuevoUser",props:{dialog:Boolean,ItemUsuario:{}},data:()=>({}),created(){this.cargarCarreras(),this.cargarRoles(),this.cargarPermisos(),this.ItemUsuario.correo=""},methods:{...(0,v.nv)("Carreras",["cargarCarreras"]),...(0,v.nv)("Usuarios",["AgregarUsuario","AgregarUsuarioCarreras","eliminarCarrerasSecre"]),...(0,v.nv)("Roles",["cargarRoles"]),...(0,v.nv)("Permisos",["cargarPermisos"]),...(0,v.OI)("Dialogo",["setDialog"]),...(0,v.nv)("Login",["validarCorreo"]),controles(){return{controlNom:[t=>{if(!t)return"Ingrese los nombres del usuario";const e=/^[a-zA-Z\s]+$/;return e.test(t)||"Ingrese solo letras"}],controlApe:[t=>{if(!t)return"Ingrese los Apellidos del usuario";const e=/^[a-zA-Z\s]+$/;return e.test(t)||"Ingrese solo letras"}],controlCor:[t=>!!t||"Ingresar el correo"],controlCon:[t=>!!t||"Ingresar una contraseña"],controlRol:[t=>!!t||"Selecione un rol"],controlCar:[t=>!!t||"Selecione almenos una carrera"]}},agregar(){this.insertarUsuario()},notificarUsuario(){},validarC:async function(){try{let t=this.ItemUsuario.correo,e=t.split("@").filter(Boolean);"uta.edu.ec"==e[e.length-1]||this.$alertify.alert("Correo Incorrecto","Ingrese un correo válido => @uta.edu.ec  ",(()=>{this.ItemUsuario.correo=""}));const a=await this.validarCorreo({correo:this.ItemUsuario.correo});a&&this.$alertify.alert("Correo Registrado","Este correo ya esta registrado",(()=>{this.ItemUsuario.correo=""}))}catch(t){this.$alertify.error("Error al validar un correo:",t)}},insertarUsuario:async function(){try{if(""!==this.ItemUsuario.nombre&&""!==this.ItemUsuario.apellido&&""!==this.ItemUsuario.correo&&""!==this.ItemUsuario.contraseña){let t=f().SHA256(this.ItemUsuario.contraseña).toString();this.ItemUsuario.contraseña=t,await this.AgregarUsuario(this.ItemUsuario),await this.actualizarCarrerasUsuario(),this.cerrarDialog(),this.limpiarCampos(),this.$alertify.success(0==this.ItemUsuario.id?"Usuario Insertado":"Usuario Actualizado")}else this.$alertify.error("Complete los campos requeridos")}catch(t){this.$alertify.error("Error al agregar usuario:"+t)}},devolverCarreras(){const t=[];for(let e=0;e<this.getCarrerasUser.length;e++)t.push(this.getCarrerasUser[e].idCar);return t},actualizarCarrerasUsuario:async function(){try{const t=this.devolverCarreras(),e=this.ItemUsuario.carreras,a=t.filter((t=>!e.includes(t))),r=e.filter((e=>!t.includes(e)));if(a.length>0||r.length>0){if(a.length>0)for(const t of a)await this.eliminarCarrerasSecre({id:this.ItemUsuario.id,idCar:t});r.length>0&&await this.AgregarUsuarioCarreras({idU:this.ItemUsuario.id,cars:r})}}catch(t){this.$alertify.error("Error al agregar un Usuario:",t)}},cerrarDialog(){this.setDialog(!1)},limpiarCampos(){this.ItemUsuario.nombre="",this.ItemUsuario.apellido="",this.ItemUsuario.correo="",this.ItemUsuario.contraseña="",this.ItemUsuario.rol="",this.ItemUsuario.permisos="",this.ItemUsuario.carreras=""}},computed:{...(0,v.Se)("Carreras",["getCarreras","getCarrerasUser"]),...(0,v.Se)("Roles",["getRoles"]),...(0,v.Se)("Permisos",["getPermisos"])}},Dt=Ut,xt=(0,l.Z)(Dt,Et,_t,!1,null,null,null),Nt=xt.exports,Ot=function(){var t=this,e=t._self._c;return e("v-row",{attrs:{justify:"center"}},[e("progres3",{attrs:{dialog:t.dailogPlantillaProgress,message:t.sms}}),e("v-dialog",{attrs:{persistent:"",width:"400"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e("v-card",[e("v-card-title",[0==t.ItemPlantilla.idPlan?e("span",{staticClass:"text-h5"},[t._v("Nueva Plantilla")]):t._e(),e("v-spacer")],1),e("v-card-text",[e("v-container",[e("v-row",[e("v-col",{attrs:{cols:"12"}},[e("v-text-field",{attrs:{label:"Nombre Plantilla*",rules:t.controles().controlNom,required:""},model:{value:t.ItemPlantilla.nomPlan,callback:function(e){t.$set(t.ItemPlantilla,"nomPlan",e)},expression:"ItemPlantilla.nomPlan"}})],1),e("v-col",{attrs:{cols:"12"}},[e("v-input",[e("v-text-field",{attrs:{label:"Nombre Subcarpeta*",rules:t.controles().controlItem,required:""},model:{value:t.item,callback:function(e){t.item=e},expression:"item"}}),e("v-tooltip",{staticStyle:{"margin-right":"100px"},attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:r}){return[e("v-icon",t._g(t._b({attrs:{color:"black darken-2",size:"30"},on:{click:function(e){return e.stopPropagation(),t.agrgarItem()}}},"v-icon",r,!1),a),[t._v(" mdi-plus-thick ")])]}}])},[e("span",[t._v("Agregar")])])],1)],1),e("v-col",{attrs:{cols:"12"}},[e("label",[t._v("Subcarpetas creadas")]),e("v-select",{attrs:{items:t.ItemPlantilla.items,label:"Subcarpetas",required:""},on:{change:function(e){return t.cambiarValor()}},model:{value:t.auxItem,callback:function(e){t.auxItem=e},expression:"auxItem"}})],1)],1)],1)],1),e("v-card-actions",[e("v-spacer"),e("v-btn",{attrs:{color:"secondary",variant:"text"},on:{click:function(e){return t.cerrarDialog()}}},[t._v(" Close ")]),e("v-btn",{attrs:{color:"primary",variant:"text"},on:{click:function(e){return t.agregar()}}},[t._v(" Save ")])],1)],1)],1)],1)},kt=[],$t={name:"NuevaPlantilla",props:{dialog:Boolean,ItemPlantilla:{}},data(){return{sms:"Guardando Datos...",item:"",auxItem:"",aux:"",auxModify:!1,auxArray:[]}},methods:{...(0,v.OI)("Dialogo",["setDialogPlantilla","setDailogPlantillaProgress"]),...(0,v.nv)("Plantillas",["AgregarPlantilla","AgregarMasItemsDirectorios","AgregarItemsSubDirectorios","AgregarItemsDirectorios","cargarPlantillas","AgregarItemsPalntilla","cargarItemsPlantillasTiene"]),...(0,v.nv)("SubCarpetas",["actualizarSubCapeta"]),controles(){return{controlNom:[t=>{if(!t)return"Ingrese un nombre";const e=/^[a-zA-Z\s]+$/;return e.test(t)||"Ingrese solo letras"}],controlItem:[t=>{if(t){const e=/^[a-zA-Z\s]+$/;return e.test(t)||"Ingrese solo letras"}}]}},agregar:async function(){this.setDailogPlantillaProgress(!0);try{if(""!==this.ItemPlantilla.nomPlan||this.ItemPlantilla.items>0){if(await Promise.all([this.AgregarPlantilla(this.ItemPlantilla),this.AgregarItemsPalntilla(this.ItemPlantilla),this.AgregarItemsSubDirectorios(this.ItemPlantilla),this.cargarPlantillas()]),!this.auxModify){let t=this.obtenerNoRepetidos(this.auxArray);await this.AgregarMasItemsDirectorios({datos:t,idPlan:this.ItemPlantilla.idPlan})}0==this.ItemPlantilla.idPlan&&(await this.AgregarItemsDirectorios({datos:this.ItemPlantilla,idPlan:this.ItemPlantilla.idPlan}),await this.cargarPlantillas()),await this.cargarPlantillas(),this.$alertify.success(0===this.ItemPlantilla.idPlan?"Plantilla creada":"Plantilla Actualizada"),this.cerrarDialog()}else this.$alertify.error("No existen datos");this.auxArray=[],this.setDailogPlantillaProgress(!1)}catch(t){console.error("Error:",t),this.$alertify.error("Ocurrió un error al procesar la solicitud agregar Plantilla "+t)}},cerrarDialog(){this.setDialogPlantilla(!1)},agrgarItem:async function(){try{if(this.ItemPlantilla.idPlan>0&&await this.cargarItemsPlantillasTiene({idPlan:this.ItemPlantilla.idPlan}),this.aux!=this.item){this.ItemPlantilla.idPlan>0&&(this.auxModify=await this.actualizarSubCapeta({nomItem:this.aux,nuevoItem:this.item}));const t=this.ItemPlantilla.items.indexOf(this.aux);-1!==t&&this.ItemPlantilla.items.splice(t,1),this.ItemPlantilla.items.push(this.item)}if(this.ItemPlantilla.idPlan>0){const t=this.item;this.getItemsPlantillasTiene.some((({NomItem:e})=>e.toLowerCase()!=t.toLowerCase()))&&this.auxArray.push(t)}this.item=""}catch(t){this.$alertify.error("Error al realizar la operación agregar Plantilla "+t)}},obtenerNoRepetidos(t){let e=[];const a={};for(const r of t)a[r]=(a[r]||0)+1;for(const r in a)a[r]<=1&&e.push(r);return e},cambiarValor(){this.item=this.auxItem,this.aux=this.auxItem}},components:{progres3:ct},computed:{...(0,v.Se)("Plantillas",["getItemsPlantillasTiene"]),...(0,v.rn)("Dialogo",["dailogPlantillaProgress"])}},Tt=$t,Bt=(0,l.Z)(Tt,Ot,kt,!1,null,null,null),Ft=Bt.exports,Rt=a(9974),zt={props:["links"],created(){},data(){return{fecha:"",path:"",idUser:0,nomUser:"",showMenu:!1,dialogFile:!1,sms:"Importando datos, por favor espere...",estudianteSelect:{},carpetaSelect:{},itemSeleccionado:{},usuarioSelect:{},plantillaSelect:{},mostrarInput:!1,items:[]}},methods:{...(0,v.OI)("Dialogo",["setDialog","setDialogFolder","setDialogPlantilla","setDialogCarpeta","setDialogProgres"]),...(0,v.OI)("Usuarios",["setUser"]),...(0,v.OI)("Estudiantes",["setEst"]),...(0,v.OI)("Plantillas",["setPlan"]),...(0,v.OI)("Server_Carpetas",["setCarpeta"]),...(0,v.OI)("Server_Archivos",["setObsArch"]),...(0,v.nv)("Estudiantes",["AgregarEstudiante","cargarEstudiantes","buscarEstCedula"]),...(0,v.nv)("Server_Carpetas",["crearCarpeta","crearSubCarpeta"]),...(0,v.nv)("Plantillas",["cargarItemsPlantillas"]),optionSelected(t){switch(t){case"Crear Carpeta":this.nuevaCarpeta();break;case"Subir Archivo":this.subirArchivo();break;case"Crear Usuario":this.nuevoUsuario();break;case"Importar Datos":this.importarDatos();break;case"Crear Plantilla":this.crearPlantilla();break;case"Crear Estudiante":this.nuevoEstudiante();break;default:alert("Opción seleccionada: "+t);break}},nuevoEstudiante(){const t=JSON.parse(localStorage.getItem("user"));let e=t.NomUser+" "+t.ApeUser;this.fechaActual(),this.estudianteSelect={IdEst:0,Cedula:"",NomEst:"",ApeEst:"",NomCar:this.idCarreraSelect,Fecha:this.fecha,IdPlanPer:0,NomModificador:e},this.setEst(this.estudianteSelect),this.setDialogFolder(!0)},nuevaCarpeta(){this.carpetaSelect={IdEst:0,NomEst:"",ApeEst:""},this.setCarpeta(this.carpetaSelect),this.setDialogCarpeta(!0)},nuevoUsuario(){this.usuarioSelect={id:0,nombre:"",apellido:"",correo:"","contraseña":"",rol:0,carreras:[]},this.setUser(this.usuarioSelect),this.setDialog(!0)},crearPlantilla(){this.plantillaSelect={idPlan:0,nomPlan:"",items:[]},this.setPlan(this.plantillaSelect),this.setDialogPlantilla(!0)},subirArchivo(){this.dialogFile=!0},importarDatos(t){this.$refs.inputFile.click()},subirExcel(){this.rutaNueva();const t=JSON.parse(localStorage.getItem("user"));this.idUser=t.IdUser,this.nomUser=t.NomUser+" "+t.ApeUser;let e=document.getElementById("archivoExcel");const a=e.files[0].name,r=a.split(".").pop();"xlsx"===r?(0,Rt.Z)(e.files[0]).then((async t=>{this.items=t,this.fechaActual(),this.setDialogProgres(!0);let a=0;for(let e=1;e<this.items.length;e++){const t=this.items[e];let r=await this.buscarEstudianteCed(t[3].toString());if(!r){const e={IdEst:t[0],NomEst:t[1],ApeEst:t[2],Cedula:t[3],Fecha:this.fecha,NomModificador:this.nomUser,NomCar:this.idCarreraSelect,idPlanPer:t[4]};await this.crearCarpeta({datos:e,path:this.path,oldPath:this.rutaAnterior}),await this.AgregarEstudiante(e),await this.crearSubDirectorios(e,this.path),a++}}this.setDialogProgres(!1),this.path="",await this.cargarEstudiantes({idCar:this.idCarreraSelect,idUser:this.idUser}),0==a?(this.$alertify.error("Estudiantes Insertados "+a),this.$alertify.error("Los estudiantes ya existen, verifique datos y vuelta a intentarlo")):this.$alertify.success("Estudiantes Insertados "+a),e.value=null})):this.$alertify.error("Selecione solo archivos excel para poder importar los datos")},crearSubDirectorios:async function(t,e){await this.cargarItemsPlantillas(t);const a=this.getItemsPlantillas[0].Items,r=a.split(",");for(let s=0;s<r.length;s++)await this.crearSubCarpeta({datos:t,path:e,nombre:r[s]})},fechaActual(){const t=new Date;this.fecha=t.getFullYear()+"-"+("0"+(t.getMonth()+1)).slice(-2)+"-"+("0"+t.getDate()).slice(-2)},rutaNueva(){for(let t=0;t<this.itemsBread.length;t++)this.path+=this.itemsBread[t]+"/"},buscarEstudianteCed:async function(t){let e=this.validarCedula(t);if(e){let e=await this.buscarEstCedula({cedula:t});return!!e}return!1},validarCedula(t){if("string"!==typeof t)return!1;if(10!==t.length)return!1;const e=t.substring(0,9),a=parseInt(t.charAt(9));let r=0;for(let o=0;o<9;o++){let t=parseInt(e.charAt(o));o%2===0&&(t*=2,t>9&&(t-=9)),r+=t}const s=r%10,i=0===s?0:10-s;return i===a}},components:{NuevoEstudiante:ht,NuevaUsuario:Nt,SubirArchivo:wt,NuevaPlantilla:Ft,NuevaCarpeta:bt,progres:ct},computed:{...(0,v.rn)("Dialogo",["dialogUser","dialogFolder","dailogPlantilla","tablaEst","tablaArch","dailogCarpeta","itemsBread","dailogProgres"]),...(0,v.rn)("Usuarios",["dataUsuario"]),...(0,v.rn)("Estudiantes",["dataEst","idEst"]),...(0,v.rn)("Plantillas",["dataPlan"]),...(0,v.rn)("Carreras",["idCarreraSelect"]),...(0,v.rn)("Server_Carpetas",["dataCarpeta","rutaAnterior"]),...(0,v.rn)("Server_Archivos",["dataObsArch"]),...(0,v.Se)("Plantillas",["getPlantillas","getItemsPlantillas"])}},Lt=zt,Jt=(0,l.Z)(Lt,tt,et,!1,null,null,null),Zt=Jt.exports,jt=function(){var t=this,e=t._self._c;return e("div",[[e("progres",{attrs:{dialog:t.dailogCargarDatos,message:t.sms}}),e("v-card",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}]},[e("v-card-title",[t._v(" "+t._s(t.Titulo)+" "),e("v-spacer"),e("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),e("v-spacer"),e("v-btn",{attrs:{color:"primary"},on:{click:function(e){return t.descargarAll()}}},[t._v("Descargar Todo "),e("v-icon",{attrs:{right:""}},[t._v("mdi-folder-download")])],1)],1),e("v-data-table",{staticClass:"elevation-1",attrs:{dense:"",headers:t.Cabecera,items:t.Items,"item-per-page":10,search:t.search},scopedSlots:t._u([{key:"item",fn:function({item:a}){return[e("tr",{staticClass:"myStyle"},[e("td",[e("v-icon",{staticClass:"mr-3",attrs:{color:"yellow darken-1"}},[t._v("mdi-folder")])],1),e("td",{staticClass:"linea",on:{click:function(e){return t.hacerAlgoAlHacerClic(a)}}},[t._v(t._s(a.NomEst)+" "+t._s(a.ApeEst))]),e("td",[t._v(t._s(a.NomCar))]),e("td",[t._v(t._s(a.Fecha))]),e("td",[t._v(t._s(a.Nom_Modificador))]),e("td",[e("v-tooltip",{staticStyle:{"margin-right":"100px"},attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:r,attrs:s}){return[e("v-icon",t._g(t._b({staticClass:"me-2",attrs:{color:"primary darken-2",size:"30"},on:{click:function(e){return e.stopPropagation(),t.editarItem(a)}}},"v-icon",s,!1),r),[t._v(" mdi-pencil ")])]}}],null,!0)},[e("span",[t._v("Editar")])]),e("v-tooltip",{staticStyle:{"margin-right":"100px"},attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:r,attrs:s}){return[e("v-icon",t._g(t._b({attrs:{color:"red darken-2",size:"30"},on:{click:function(e){return e.stopPropagation(),t.eliminarItem(a)}}},"v-icon",s,!1),r),[t._v(" mdi-delete ")])]}}],null,!0)},[e("span",[t._v("Eliminar")])]),e("v-tooltip",{staticStyle:{"margin-right":"100px"},attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:r,attrs:s}){return[e("v-icon",t._g(t._b({attrs:{color:"black darken-2",size:"30"},on:{click:function(e){return e.stopPropagation(),t.descargarItem(a)}}},"v-icon",s,!1),r),[t._v(" mdi-download ")])]}}],null,!0)},[e("span",[t._v("Descargar")])])],1)])]}}])})],1)]],2)},Mt=[],Vt={name:"TablaC",props:["show","Titulo","Cabecera","Items"],data(){return{search:"",path:"",sms:"Cargando datos...",search:"",customDir:null,selectedItems:[],estudianteSeleccionado:{}}},methods:{...(0,v.OI)("Dialogo",["setDialogFolder","setVentanaEst","setVentanaArch","setBreadcrumbs","setDailogCargarDatos"]),...(0,v.OI)("Estudiantes",["setEst","setIdEst"]),...(0,v.OI)("Server_Carpetas",["setRutaAnterior"]),...(0,v.OI)("Plantillas",["setIdEstPlan"]),...(0,v.nv)("Estudiantes",["eliminarEstudiante","cargarEstudiantes"]),...(0,v.nv)("Server_Carpetas",["cargarCarpetas","eliminarCarpeta","descargarCarpeta"]),...(0,v.nv)("Plantillas",["cargarEstudinates_Plantillas"]),editarItem(t){console.log("item Datos"),this.rutaNueva(),this.estudianteSeleccionado={IdEst:t.IdEst,Cedula:t.CedEst,NomEst:t.NomEst,ApeEst:t.ApeEst,NomCar:t.IdCar,Fecha:t.Fecha,modificado:""},this.setEst(this.estudianteSeleccionado),this.setDialogFolder(!0),this.setRutaAnterior(this.path+t.NomEst+" "+t.ApeEst),this.path=""},eliminarItem(t){this.rutaNueva();const e=JSON.parse(localStorage.getItem("user"));this.idUser=e.IdUser,this.$alertify.confirm("Deseas eliminar el estudiante: "+t.NomEst+" "+t.ApeEst+", Se borran todos los datos",(()=>{this.eliminarEstudiante(t),this.eliminarCarpeta({ruta1:this.path,ruta2:this.path+t.NomEst+" "+t.ApeEst}),this.cargarEstudiantes({idCar:this.idCarreraSelect,idUser:this.idUser}),this.$alertify.success("Usuario "+t.NomEst+" "+t.ApeEst+" Eliminado"),this.path=""}),(()=>this.$alertify.error("Cancelado")))},descargarItem:async function(t){try{this.rutaNueva(),await this.descargarCarpeta({ruta:this.path,nombre:t.NomEst+" "+t.ApeEst}),this.$alertify.success("Archivo Descargado en unidad C:/DESCARGAS"),this.path=""}catch(e){this.$alertify.error("Error al descargar un archivo "+e)}},async descargarAll(){try{this.rutaNueva();const t="";await this.descargarCarpeta({ruta:this.path,nombre:t}),this.$alertify.success("Archivo Descargado en unidad C:/DESCARGAS"),this.path=""}catch(t){console.error("Error al descargar carpeta:",t),this.$alertify.error("Error al descargar carpeta "+t)}},hacerAlgoAlHacerClic:async function(t){this.setDailogCargarDatos(!0),localStorage.removeItem("padreActual"),this.setIdEst(t.IdEst),this.setIdEstPlan(t.IdPlanPer),await this.cargarEstudinates_Plantillas({idPlan:t.IdPlanPer}),this.setVentanaEst(!1),this.setVentanaArch(!0),this.setBreadcrumbs(t.NomEst.toUpperCase()+" "+t.ApeEst.toUpperCase()),this.rutaNueva(),await this.cargarCarpetas(this.path),this.path="",this.setDailogCargarDatos(!1)},handleDirChange(t){this.customDir=this.$refs.customDirInput.files[0]?.path},rutaNueva(){for(let t=0;t<this.itemsBread.length;t++)this.path+=this.itemsBread[t]+"/"}},watch:{show(){}},components:{progres:ct},computed:{...(0,v.rn)("Carreras",["idCarreraSelect"]),...(0,v.rn)("Dialogo",["itemsBread","dailogCargarDatos"])},watch:{}},Wt=Vt,Gt=(0,l.Z)(Wt,jt,Mt,!1,null,null,null),qt=Gt.exports,Ht=function(){var t=this,e=t._self._c;return e("div",[e("ObsArch",{attrs:{dialog:t.dialogObs},on:{dialog:function(e){t.dialogObs=e}}}),e("progres2",{attrs:{dialog:t.dailogEliminar,message:t.sms}}),[t.show?e("v-card",[e("v-card-title",[t._v(" "+t._s(t.Titulo)+" "),e("v-spacer"),e("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),e("v-spacer"),e("v-btn",{attrs:{color:"primary"},on:{click:function(e){return t.descargarAll()}}},[t._v("Descargar Todo "),e("v-icon",{attrs:{right:""}},[t._v("mdi-folder-download")])],1)],1),""!=t.ItemsArchivos?e("v-data-table",{staticClass:"elevation-1",attrs:{dense:"",headers:t.Cabecera,items:t.ItemsArchivos.elementos,"item-per-page":5,search:t.search},scopedSlots:t._u([{key:"item",fn:function({item:a}){return[t.verificarPermisos(a)?e("tr",{staticClass:"myStyle"},[e("td",["Archivo"!=a.tipo?e("v-icon",{staticClass:"mr-3",attrs:{color:"yellow darken-1"}},[t._v("mdi-folder")]):e("v-icon",{staticClass:"mr-3",attrs:{color:"red darken-1"}},[t._v("mdi-file-document")])],1),e("td",{staticClass:"linea",on:{click:function(e){return t.hacerAlgoAlHacerClic(a)}}},[t._v(t._s(a.nombre))]),"Archivo"!=a.tipo?e("td",[t._v(t._s(a.cantidad)+" elementos ")]):e("td",[t._v(t._s(a.tamaño)+" MB")]),e("td",[t._v(t._s(a.fecha_creacion))]),e("td",[t._v(t._s(a.tipo))]),e("td",[e("div",{staticClass:"flex"},[e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:r,attrs:s}){return[t.mostrarEditar(a)?e("v-icon",t._g(t._b({staticClass:"me-2",attrs:{color:"primary darken-2",size:"30"},on:{click:function(e){return e.stopPropagation(),t.editarItem(a)}}},"v-icon",s,!1),r),[t._v(" mdi-pencil ")]):e("v-icon",{attrs:{size:"35"}},[t._v("mdi-alpha-x")])]}}],null,!0)},[e("span",[t._v("Editar")])]),e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:r,attrs:s}){return[t.mostrarEliminar(a)?e("v-icon",t._g(t._b({attrs:{color:"error darken-2",size:"30"},on:{click:function(e){return e.stopPropagation(),t.eliminarItem(a)}}},"v-icon",s,!1),r),[t._v(" mdi-delete ")]):e("v-icon",{attrs:{size:"35"}},[t._v("mdi-alpha-x")])]}}],null,!0)},[e("span",[t._v("Eliminar")])]),e("div",[e("v-tooltip",{staticStyle:{"margin-right":"15px"},attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:r,attrs:s}){return[e("v-icon",t._g(t._b({attrs:{color:"black darken-2",size:"30"},on:{click:function(e){return e.stopPropagation(),t.descargarDatos(a)}}},"v-icon",s,!1),r),[t._v(" mdi-download ")])]}}],null,!0)},[e("span",[t._v("Descargar")])])],1),t.mostrarVista(a)?e("div",[e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:r,attrs:s}){return[e("v-icon",t._g(t._b({staticClass:"me-2",attrs:{color:"yellow darken-2",size:"30"},on:{click:function(e){return e.stopPropagation(),t.verObservacion(a)}}},"v-icon",s,!1),r),[t._v(" mdi-eye-circle ")])]}}],null,!0)},[e("span",[t._v("Observacion")])])],1):t._e()],1)])]):t._e()]}}],null,!1,3549048374)}):e("div",{staticClass:"error-message"},[t._v(t._s(t.ItemsArchivos))])],1):t._e()]],2)},Yt=[],Kt=function(){var t=this,e=t._self._c;return e("v-dialog",{attrs:{width:"400",persistent:""},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e("v-card",[e("v-card-title",{staticClass:"headline"},[t._v(" Mensaje ")]),e("v-card-text",[t._v(" "+t._s(t.mensaje)+" ")]),e("v-card-text",[t._v(" "+t._s(t.getObs.length>0?t.getObs[0].Observacion:"No tiene observacion para mosttar")+" ")]),e("v-card-actions",[e("v-spacer"),e("v-btn",{attrs:{color:"primary"},on:{click:function(e){return t.cerrarDialog()}}},[t._v("Aceptar")])],1)],1)],1)},Qt=[],Xt={props:{dialog:Boolean},data(){return{mensaje:"",dialogObs:!1}},methods:{cerrarDialog(){this.$emit("dialog",!1)}},computed:{...(0,v.Se)("Server_Archivos",["getObs"]),getObsText(){return JSON.stringify(this.getObs,null,2)}}},te=Xt,ee=(0,l.Z)(te,Kt,Qt,!1,null,"71c4f058",null),ae=ee.exports,re={name:"TablaC",props:["show","Titulo","Cabecera","ItemsArchivos"],data(){return{search:"",path:"",search:"",sms:"Cargando Datos...",selectedItems:[],carpetaSelecionada:{},rutaActual:"",dialogObs:!1}},methods:{...(0,v.OI)("Dialogo",["setDailogEliminar","setMostrarCrear","setDialogFolder","setVentanaEst","setVentanaArch","setBreadcrumbs","setDialogCarpeta","setCtlSubirArch","setCtlfolder","setDailogCargarDatos"]),...(0,v.nv)("Server_Carpetas",["cargarCarpetas","eliminarCarpeta","descargarCarpeta"]),...(0,v.nv)("Server_Archivos",["descargarArchivo","cargarObsArchivos"]),...(0,v.OI)("Server_Carpetas",["setRutaAnterior","setCarpeta"]),editarItem(t){this.rutaNueva(),this.carpetaSelecionada={IdEst:1,NomEst:t.nombre,ApeEst:""},this.setCarpeta(this.carpetaSelecionada),this.setDialogCarpeta(!0),this.setRutaAnterior(this.path+t.nombre),this.path=""},eliminarItem:async function(t){try{this.rutaNueva(),this.$alertify.confirm("Deseas eliminar el estudiante: "+t.nombre,(async()=>{console.log("Ruta Borrar "+this.path+t.nombre),await this.eliminarCarpeta({ruta1:this.path,ruta2:this.path+t.nombre,tipo:t.tipo}),await this.cargarCarpetas(this.path),this.path="",this.$alertify.success("Carpeta "+t.nombre+" Eliminada")}),(()=>this.$alertify.error("Cancelado")))}catch(e){this.$alertify.error("Error al eliminar carpeta "+e)}},async hacerAlgoAlHacerClic(t){this.setDailogEliminar(!0),this.verificarSiPadre(t)&&localStorage.setItem("padreActual",t.nombre.trim().toLowerCase()),this.verificarSiArchivo(t),this.rutaNueva(),this.setCtlSubirArch(!0),this.setCtlfolder(!0),await this.cargarCarpetasAsync(this.path),this.path="",this.setDailogEliminar(!1)},async cargarCarpetasAsync(t){await this.cargarCarpetas(t)},verificarSiArchivo(t){"Archivo"==t.tipo?(this.rutaNueva(),this.descargarItem(this.path,t),this.path=""):this.setBreadcrumbs(t.nombre)},verificarSiPadre(t){try{const e=localStorage.getItem("PermisosSubDirectorios"),a=new Map(JSON.parse(e));return console.log(a.get(t.nombre.trim().toLowerCase())),null!=a.get(t.nombre.trim().toLowerCase())}catch(e){this.$alertify.error("Error al verificar Carpeta Padre "+e)}},recuperarPermisos(){const t=localStorage.getItem("PermisosSubDirectorios");return new Map(JSON.parse(t))},verificarPermisosGenerico(t,e){try{const e=this.recuperarPermisos(),a=t.nombre.trim().toLowerCase();if(this.getSubCarpetas.some((({NomItem:e})=>e.toLowerCase()===t.nombre.toLowerCase()))&&localStorage.setItem("padreActual",""),null!=e.get(a))return!0;const r=localStorage.getItem("padreActual"),s=e.get(r);return null!=s}catch(a){this.$alertify.error("Error al verificar permisos "+a)}},mostrarEditarGenerico(t,e){try{const a=this.recuperarPermisos(),r=t.nombre.trim().toLowerCase();if(null!=a.get(r))return a.get(r).includes(e);const s=localStorage.getItem("padreActual"),i=a.get(s.trim());return null!=i&&i.includes(e)}catch(a){this.$alertify.error("Error al verificar permisos individuales "+a)}},verificarPermisos(t){return this.verificarPermisosGenerico(t)},mostrarEditar(t){return this.mostrarCrear(t),this.mostrarEditarGenerico(t,"Editar")},mostrarEliminar(t){return this.mostrarEditarGenerico(t,"Eliminar")},mostrarCrear(t){let e=this.mostrarEditarGenerico(t,"Crear");this.setMostrarCrear(e)},mostrarVista(t){return"Archivo"===t.tipo},verObservacion:async function(t){this.dialogObs=!0,this.rutaNueva(),await this.cargarObsArchivos({rutaObs:this.path+t.nombre.trim()}),this.path=""},descargarItem:async function(t,e){try{await this.descargarArchivo({ruta:t+e.nombre,nombre:e.nombre}),this.$alertify.success("Archivo Descargado")}catch(a){this.$alertify.error("Error al descargar el archivo "+a)}},descargarDirectorio:async function(t,e){try{await this.descargarCarpeta({ruta:t,nombre:e.nombre}),this.$alertify.success("Archivo Descargado en unidad C:/DESCARGAS")}catch(a){this.$alertify.error("Error al descargar carpeta "+a)}},descargarAll:async function(){try{this.rutaNueva();const t="";await this.descargarCarpeta({ruta:this.path,nombre:t}),this.$alertify.success("Archivo Descargado en unidad C:/DESCARGAS"),this.path=""}catch(t){this.$alertify.error("Error al descargar las carpetas "+t)}},descargarDatos(t){this.rutaNueva(),"Archivo"===t.tipo?this.descargarItem(this.path,t):this.descargarDirectorio(this.path,t),this.path=""},rutaNueva(){for(let t=0;t<this.itemsBread.length;t++)this.path+=this.itemsBread[t]+"/"}},components:{ObsArch:ae,progres2:ct},computed:{...(0,v.rn)("Dialogo",["itemsBread","dailogCargarDatos","dailogEliminar"]),...(0,v.rn)("Permisos",["permisosSubDirectorios"]),...(0,v.Se)("SubCarpetas",["getSubCarpetas"])},watch:{}},se=re,ie=(0,l.Z)(se,Ht,Yt,!1,null,null,null),oe=ie.exports,ne=function(){var t=this,e=t._self._c;return e("div",[e("progres",{attrs:{dialog:t.dailogPermisos,message:t.sms}}),[t.show?e("v-card",[e("v-card-title",[t._v(" "+t._s(t.Titulo)+" "),e("v-spacer"),e("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),e("v-spacer"),e("v-btn",{attrs:{color:"primary"},on:{click:function(e){return t.descargarAll()}}},[t._v("Descargar Todo "),e("v-icon",{attrs:{right:""}},[t._v("mdi-folder-download")])],1)],1),e("v-data-table",{attrs:{dense:"",headers:t.Cabecera,items:t.Items,"items-per-page":5,search:t.search},scopedSlots:t._u([{key:"item",fn:function({item:a}){return[e("tr",{staticClass:"myStyle",on:{click:function(e){return t.abrirVentana(a)}}},[e("td",{staticClass:"linea"},[e("v-icon",{staticClass:"mr-3",attrs:{color:"yellow darken-1"}},[t._v("mdi-folder")]),t._v(t._s(a.NomEst)+" "+t._s(a.ApeEst))],1),e("td",[t._v(t._s(a.nomCar))]),e("td",[e("v-tooltip",{staticStyle:{"margin-right":"100px"},attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:r,attrs:s}){return[e("v-icon",t._g(t._b({attrs:{color:"black darken-2",size:"30"},on:{click:function(e){return e.stopPropagation(),t.descargarDirectorio(a)}}},"v-icon",s,!1),r),[t._v(" mdi-download ")])]}}],null,!0)},[e("span",[t._v("Descargar")])])],1)])]}}],null,!1,4047692615)})],1):t._e()]],2)},le=[],ce={name:"Carreras",props:["show","Titulo","Cabecera","Items"],data(){return{search:"",carrera:0,permisosDirectorios:new Map,sms:"Obteniendo Permisos..."}},created(){},methods:{...(0,v.OI)("Dialogo",["setVentanaCarreras","setVentanaEst","setBreadcrumbs","setVentanaArch","setDailogPermisos"]),...(0,v.OI)("Carreras",["setCarreraSelect"]),...(0,v.OI)("Carreras",["setIdCarreraSelect"]),...(0,v.nv)("Estudiantes",["cargarEstudiantes"]),...(0,v.OI)("Permisos",["setPermisosSubDirectorios"]),...(0,v.nv)("Permisos",["cargarPermisosDirectorios"]),...(0,v.nv)("Server_Carpetas",["descargarCarpeta"]),abrirVentana:async function(t){const e=localStorage.getItem("PermisosSubDirectorios");new Map(JSON.parse(e));this.obtenerPermisosDirectorios(),this.setBreadcrumbs(t.nomCar.toUpperCase()),this.obtnerIdCarrera();const a=JSON.parse(localStorage.getItem("user"));await this.cargarEstudiantes({idCar:this.carrera,idUser:a.IdUser}),this.setCarreraSelect(t.nomCar),this.setVentanaCarreras(!1),this.setVentanaEst(!0)},descargarDirectorio:async function(t){this.rutaNueva(),await this.descargarCarpeta({ruta:this.path,nombre:t.nomCar}),this.$alertify.success("Archivo Descargado en unidad /C:"),this.path=""},descargarAll:async function(){const t="";await this.descargarCarpeta({ruta:this.itemsBread[0],nombre:t}),this.$alertify.success("Archivo Descargado en unidad C:/DESCARGAS"),this.path=""},obtnerIdCarrera(){switch(this.itemsBread[1]){case"INGENIERÍA INDUSTRIAL":this.carrera=1;break;case"SOFTWARE":this.carrera=2;break;case"TI":this.carrera=3;break;case"TELECOMUNICACIONES":this.carrera=4;break;case"AUTOMATIZACIÓN Y ROBÓTICA":this.carrera=5;break;default:break}this.setIdCarreraSelect(this.carrera)},obtenerPermisosDirectorios:async function(){this.setDailogPermisos(!0);try{const t=JSON.parse(localStorage.getItem("user")),e=t.IdUser;await Promise.all(this.getSubCarpetas.map((async t=>{await this.cargarPermisosDirectorios({idUser:e,nomItem:t.NomItem}),this.permisosDirectorios.set(t.NomItem.toLowerCase(),this.getPermisosDirectorios[0].NomPer)})));const a=JSON.stringify(Array.from(this.permisosDirectorios.entries()));localStorage.setItem("PermisosSubDirectorios",a)}catch(t){throw console.error("Error al obtener permisos de directorios:",t),t}this.setDailogPermisos(!1)},rutaNueva(){for(let t=0;t<this.itemsBread.length;t++)this.path+=this.itemsBread[t]+"/"}},components:{progres:ct},computed:{...(0,v.rn)("Dialogo",["itemsBread","dailogPermisos"]),...(0,v.Se)("Permisos",["getPermisosDirectorios"]),...(0,v.Se)("SubCarpetas",["getSubCarpetas"])}},de=ce,ue=(0,l.Z)(de,ne,le,!1,null,null,null),me=ue.exports,he={name:"Estudiantes",components:{TablaEst:qt,BtnOpciones:Zt,TablaDir_Arch:oe,Carreras:me},data(){return{itemsVacio:[],btnOP:[],tituloUser:"",idUser:null,path:"",sms:"",carrera:0,permisosDirectorios:new Map,Cabecera:[{text:"Tipo",value:"tipo"},{text:"Nombre",value:"NomUser"},{text:"Carrera",value:"NomCar"},{text:"Modificado",value:"Fecha"},{text:"Modificador por",value:"Nom_Modificador"},{text:"ACCIONES",value:"acciones"}],Cabecera2:[{text:"Tipo",value:"tipo"},{text:"Nombre",value:"nombre"},{text:"Tamaño",value:"tamaño"},{text:"Modificado",value:"fecha"},{text:"Modificador por",value:"user"},{text:"ACCIONES",value:"acciones"}],CabeceraCarreras:[{text:"Tipo",value:" "},{text:"Nombre",value:"nomCar"},{text:"Descargar",value:"descargar"}]}},created(){const t="true"===localStorage.getItem("Authentication");if(t){const t=JSON.parse(localStorage.getItem("user"));this.idUser=t.IdUser,this.cargarCarrerasUser(this.idUser),this.obtenerPermisosDirectorios(),this.acciones(this.itemsBread[0])}else this.$router.push("/")},methods:{...(0,v.nv)("Carreras",["cargarCarrerasUser","cargarCarreras"]),...(0,v.nv)("Estudiantes",["cargarEstudiantes"]),...(0,v.nv)("Server_Carpetas",["cargarCarpetas"]),...(0,v.OI)("Dialogo",["setVentanaEst","setVentanaArch","setVentanaCarreras","setBreadcrumbs","setCtlSubirArch","setCtlfolder","setDailogCargarDatos"]),...(0,v.OI)("Permisos",["setPermisosSubDirectorios"]),...(0,v.nv)("Permisos",["cargarPermisosDirectorios"]),controlArchFolder:async function(t){let e=t.split("/").filter(Boolean),a=e[e.length-1];this.getSubCarpetas.some((({NomItem:t})=>t.toLowerCase()===a.toLowerCase()))&&(this.setCtlSubirArch(!1),this.setCtlfolder(!1))},acciones(t){if(this.rutaNueva(),this.controlArchFolder(this.path),t==this.itemsBread[0])this.setVentanaCarreras(!0),this.setVentanaEst(!1),this.setVentanaArch(!1),this.setBreadcrumbs(this.itemsVacio);else switch(t){case"INGENIERÍA INDUSTRIAL":this.carrera=1,this.navegacionBreadCrumbs(this.carrera,this.idUser,t);break;case"SOFTWARE":this.carrera=2,this.navegacionBreadCrumbs(this.carrera,this.idUser,t);break;case"TI":this.carrera=3,this.navegacionBreadCrumbs(this.carrera,this.idUser,t);break;case"TELECOMUNICACIONES":this.carrera=4,this.navegacionBreadCrumbs(this.carrera,this.idUser,t);break;case"AUTOMATIZACIÓN Y ROBÓTICA":this.carrera=5,this.navegacionBreadCrumbs(this.carrera,this.idUser,t);break;default:this.path="",this.setBreadcrumbs(t),this.rutaNueva(),this.cargarCarpetas(this.path);break}this.path=""},navegacionBreadCrumbs(t,e,a){this.path="",this.setBreadcrumbs(a),this.rutaNueva(),this.cargarEstudiantes({idCar:t,idUser:e}),this.setVentanaEst(!0),this.setVentanaArch(!1)},rutaNueva(){for(let t=0;t<this.itemsBread.length;t++)this.path+=this.itemsBread[t]+"/"},obtenerPermisosDirectorios:async function(){try{const t=JSON.parse(localStorage.getItem("user")),e=t.IdUser;await Promise.all(this.getSubCarpetas.map((async t=>{await this.cargarPermisosDirectorios({idUser:e,nomItem:t.NomItem}),this.permisosDirectorios.set(t.NomItem.toLowerCase(),this.getPermisosDirectorios[0].NomPer)})));const a=JSON.stringify(Array.from(this.permisosDirectorios.entries()));localStorage.setItem("PermisosSubDirectorios",a)}catch(t){throw this.$alertify.error("Error al obtener permisos de directorios:",t),t}}},watch:{tablaEst:{handler(t,e){if(t)this.btnOP=[{icon:"folder-plus",text:"Crear Estudiante",show:"true"},{icon:"import",text:"Importar Datos",show:"true"}];else{const t=JSON.parse(localStorage.getItem("user")),e=t.IdRolPer;this.btnOP=1==e?[{icon:"folder-plus",text:"Crear Carpeta",show:"true"}]:[{icon:"alpha-x",text:"Sin permisos",show:"true"}]}},immediate:!0},ctlSubirArch:{handler(t,e){if(t)this.btnOP=[{icon:"folder-arrow-up",text:"Subir Archivo",show:"true"},{icon:"folder-plus",text:"Crear Carpeta",show:"true"}];else{this.cargarCarreras(),this.rutaNueva();let t=this.path.split("/").filter(Boolean),e=t[t.length-1];this.getCarreras.some((({NomCar:t})=>t.toUpperCase()===e.toUpperCase()))?this.btnOP=[{icon:"folder-plus",text:"Crear Estudiante",show:"true"},{icon:"import",text:"Importar Datos",show:"true"}]:this.btnOP=[{icon:"folder-plus",text:"Crear Carpeta",show:"true"}]}}}},computed:{...(0,v.Se)("Estudiantes",["getItems"]),...(0,v.Se)("Carreras",["getCarrerasUser","getCarreras"]),...(0,v.Se)("Server_Carpetas",["getCarpetas"]),...(0,v.rn)("Dialogo",["tablaEst","tablaArch","carreras","itemsBread","ctlSubirArch","mostrarCrear","dailogCargarDatos"]),...(0,v.rn)("Carreras",["carreraSelecionada","idCarreraSelect"]),...(0,v.Se)("Permisos",["getPermisosDirectorios"]),...(0,v.Se)("SubCarpetas",["getSubCarpetas"])}},pe=he,ge=(0,l.Z)(pe,Q,X,!1,null,null,null),ve=ge.exports,Ce=function(){var t=this,e=t._self._c;return e("div",[e("BtnOpciones",{staticClass:"mb-2",attrs:{links:t.btnOP,dark:""}}),e("hr"),e("v-row",[0==t.getPlantillas.length?e("v-col",{staticClass:"d-flex justify-center align-center",staticStyle:{"font-size":"30px"}},[e("span",[t._v("Cargando Datos...")])]):t._l(t.getPlantillas,(function(t,a){return e("v-col",{key:a,staticClass:"ma-2"},[e("Plantillas",{attrs:{idPlan:t.IdPlan,titulo:t.NomPlan,idItem:t.idItem,items:t.Items}})],1)}))],2)],1)},fe=[],be=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticStyle:{overflow:"hidden"}}),e("v-card",{staticClass:"mx-auto",attrs:{"max-width":"200"}},[e("v-img",{attrs:{src:null!=t.urlDw?t.urlDw:t.imgAux,contain:"",height:"100px",cover:""}}),e("v-card-title",{staticClass:"d-flex justify-center align-center",staticStyle:{"font-size":"15px"}},[t._v(" "+t._s(t.titulo)+" ")]),e("v-card-actions",[e("v-btn",{staticStyle:{display:"none"},attrs:{color:"error darken-2"},on:{click:t.eliminar}},[[e("v-icon",[t._v("mdi-delete")])]],2),e("v-btn",{attrs:{color:"primary darken-4",icon:"",small:""},on:{click:function(e){return t.editar()}}},[[e("v-icon",[t._v("mdi-pencil")])]],2),e("v-spacer"),e("v-btn",{attrs:{icon:"",small:""},on:{click:function(e){t.show=!t.show}}},[t.show?[e("v-icon",[t._v("mdi-chevron-up")])]:[e("v-icon",[t._v("mdi-chevron-down")])]],2)],1),e("v-expand-transition",[e("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}]},[e("v-divider"),t._l(t.words,(function(a,r){return e("v-card-text",{key:r},[e("ul",{staticStyle:{"font-size":"10px",overflow:"hidden","list-style":"none"}},[e("li",[e("strong",[e("v-icon",{staticClass:"mr-3",attrs:{size:"16",color:"yellow darken-1"}},[t._v("mdi-folder")]),t._v(" "+t._s(a)+" ")],1)])])])}))],2)])],1)],1)},Pe=[],Ie={data:()=>({show:!1,words:[],imgAux:a(6841)}),props:["idPlan","titulo","idItem","items","urlDw"],methods:{...(0,v.OI)("Plantillas",["setPlan"]),...(0,v.OI)("Dialogo",["setDialogPlantilla"]),editar(){try{this.setDialogPlantilla(!0),this.words=[this.items],this.words=this.items.split(","),this.plantillaSelect={idPlan:this.idPlan,nomPlan:this.titulo,items:this.words},this.setPlan(this.plantillaSelect)}catch(t){this.$alertify.error("Error al editar:",t)}},eliminar(){this.itemSeleccionadoPlan={id:this.idPlan,nombre:this.titulo},this.$alertify.confirm("Deseas eliminar la Plantilla: "+this.itemSeleccionadoPlan.nombre,(()=>{this.eliminarUsuario(this.itemSeleccionadoPlan),this.$alertify.success("Plantilla  Eliminada")}),(()=>this.$alertify.error("Cancelado")))}},mounted(){this.words=this.items.split(",")},computed:{}},Se=Ie,ye=(0,l.Z)(Se,be,Pe,!1,null,null,null),Ae=ye.exports,we={data(){return{btnOP:[{icon:"folder-plus",text:"Crear Plantilla"}]}},created(){const t="true"===localStorage.getItem("Authentication");t?this.cargarPlantillas():this.$router.push("/")},methods:{...(0,v.nv)("Plantillas",["cargarPlantillas"])},computed:{...(0,v.Se)("Plantillas",["getPlantillas"])},components:{Plantillas:Ae,BtnOpciones:Zt}},Ee=we,_e=(0,l.Z)(Ee,Ce,fe,!1,null,null,null),Ue=_e.exports,De=function(){var t=this,e=t._self._c;return e("div",[e("BtnOpciones",{staticClass:"mb-2",attrs:{links:t.btnOP,dark:""}}),e("hr"),e("v-row",[0==t.getItems.length?e("v-col",{staticClass:"d-flex justify-center align-center",staticStyle:{"font-size":"30px"}},[e("span",[t._v("Cargando Datos...")])]):t._l(t.getItems,(function(t,a){return e("v-col",{key:a,staticClass:"ma-2"},[e("UsuariosT",{attrs:{id:t.IdUser,correo:t.Correo,nombre:t.NomUser,apellido:t.ApeUser,"contraseña":t.Contraseña,rol:t.NomRol,carreras:t.Carreras,permisos:t.Permisos,idCarreras:t.IdCarreras,idPermisos:t.IdPermisos,idRol:t.IdRol,urlDw:t.download_url}})],1)}))],2)],1)},xe=[],Ne=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticStyle:{overflow:"hidden"}},[e("PermisosUser",{attrs:{dialog:t.dailogPermisos,PermisosUsario:t.dataPermisosUsuario}})],1),e("v-card",{staticClass:"mx-auto",attrs:{"max-width":"180"}},[e("v-img",{attrs:{src:null!=t.urlDw?t.urlDw:t.imgAux,contain:"",height:"80px",cover:""}}),e("v-card-title",{staticClass:"d-flex justify-center align-center",staticStyle:{"font-size":"15px"}},[t._v(" "+t._s(t.nombre)+" "+t._s(t.apellido)+" ")]),e("v-card-text",{staticClass:"d-flex justify-center align-center"},[e("v-btn",{attrs:{color:"primary"},on:{click:function(e){return t.asignarPermisos()}}},[t._v("Permisos "),e("v-icon",{attrs:{right:""}},[t._v("mdi-folder-settings")])],1)],1),e("v-card-actions",[e("v-btn",{attrs:{color:"error darken-2",icon:"",small:""},on:{click:t.eliminar}},[[e("v-icon",[t._v("mdi-delete")])]],2),e("v-btn",{attrs:{color:"primary darken-2",icon:"",small:""},on:{click:t.editar}},[[e("v-icon",[t._v("mdi-pencil")])]],2),e("v-spacer"),e("v-btn",{attrs:{icon:"",small:""},on:{click:function(e){t.show=!t.show}}},[t.show?[e("v-icon",[t._v("mdi-chevron-up")])]:[e("v-icon",[t._v("mdi-chevron-down")])]],2)],1),e("v-expand-transition",[e("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}]},[e("v-divider"),e("v-card-text",{staticStyle:{"font-size":"10px"}},[e("p",[e("strong",[t._v("Correo: ")]),t._v(" "+t._s(t.correo))]),e("p",[e("strong",[t._v("Rol: ")]),t._v(" "+t._s(t.rol))]),e("p",[e("strong",[t._v("Carreras: ")]),t._v(" "+t._s(t.carreras))])])],1)])],1)],1)},Oe=[],ke=function(){var t=this,e=t._self._c;return e("v-row",{attrs:{justify:"center"}},[e("v-dialog",{attrs:{"retain-focus":!1,persistent:"",width:"800"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e("v-card",[e("v-card-title",[e("span",{staticClass:"text-h5"},[t._v("Permisos Asignados")]),e("v-spacer"),e("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),e("v-card-text",[0!=t.getPermisosSubDir_User.length?e("v-data-table",{staticStyle:{"max-height":"200px","overflow-y":"auto"},attrs:{dense:"",headers:t.Cabecera,items:t.getPermisosSubDir_User,search:t.search,"hide-default-footer":""},scopedSlots:t._u([{key:"item",fn:function({item:a}){return[e("tr",{staticClass:"myStyle"},[e("td",[e("v-icon",{staticClass:"mr-3",attrs:{color:"yellow darken-1"}},[t._v("mdi-folder")])],1),e("td",[t._v(t._s(a.NomItem))]),e("td",[t._v(t._s(a.NomPer))]),e("td",[e("v-tooltip",{staticStyle:{"margin-right":"100px"},attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:r,attrs:s}){return[e("v-icon",t._g(t._b({attrs:{color:"red darken-2",size:"30"},on:{click:function(e){return e.stopPropagation(),t.eliminarItem(a)}}},"v-icon",s,!1),r),[t._v(" mdi-delete ")])]}}],null,!0)},[e("span",[t._v("Eliminar")])])],1)])]}}],null,!1,3137912008)}):t._e()],1),e("v-card-title",[e("span",{staticClass:"text-h5"},[t._v("Asignar Permisos")])]),e("v-card-text",[e("v-container",[e("v-row",[e("v-col",{attrs:{cols:"12",sm:"6"}},[e("v-select",{attrs:{items:t.getSubCarpetas,rules:t.controles().controlCar,"item-text":"NomItem","item-value":"IdItem",label:"SubCarpetas*",required:""},model:{value:t.PermisosUsario.IdItemSubPer,callback:function(e){t.$set(t.PermisosUsario,"IdItemSubPer",e)},expression:"PermisosUsario.IdItemSubPer"}})],1),e("v-col",{attrs:{cols:"12",sm:"6"}},[e("v-autocomplete",{attrs:{items:t.getPermisos,rules:t.controles().controlPer,"item-text":"nomPer","item-value":"IdPer",label:"Permisos*",multiple:""},model:{value:t.PermisosUsario.IdPerPer,callback:function(e){t.$set(t.PermisosUsario,"IdPerPer",e)},expression:"PermisosUsario.IdPerPer"}})],1)],1)],1),e("small",[t._v("*indicates required field")])],1),e("v-card-actions",[e("v-spacer"),e("v-btn",{attrs:{color:"secondary",variant:"text"},on:{click:function(e){return t.cerrarDialog()}}},[t._v(" Close ")]),e("v-btn",{attrs:{color:"primary",variant:"text"},on:{click:function(e){return t.agregar()}}},[t._v(" Save ")])],1)],1)],1)],1)},$e=[],Te={name:"PermisosUsuario",props:{dialog:Boolean,PermisosUsario:{}},data(){return{search:"",Cabecera:[{text:"Tipo",value:"tipo"},{text:"SubCarpeta",value:"NomItem"},{text:"Permisos",value:"NomPer"},{text:"ACCIONES",value:"acciones"}]}},created(){this.cargarSubCarpetas()},methods:{...(0,v.nv)("Permisos",["cargarPermisos"]),...(0,v.nv)("SubCarpetas",["cargarSubCarpetas"]),...(0,v.OI)("Dialogo",["setDialogPermisos"]),...(0,v.nv)("Permisos",["AgregarUsuarioPermisos","eliminarPermisosSub_User","cargarPermisosSubDir_User"]),controles(){return{controlCar:[t=>!!t||"Seleccione una carpeta"],controlPer:[t=>!!t||"Seleccione por lo menos un permiso"]}},agregar:async function(){try{await this.AgregarUsuarioPermisos(this.PermisosUsario),this.cerrarDialog(),this.$alertify.success(0==this.PermisosUsario.IdRelacion?"Permisos Insertados":"Permisos Actualizados")}catch(t){this.$alertify.error("Error en la solicitud agregar Permisos "+t)}},cerrarDialog(){this.setDialogPermisos(!1)},eliminarItem:async function(t){try{await this.eliminarPermisosSub_User({idUser:t.IdUser,idPer:t.IdPer,idItem:t.IdItem}),await this.cargarPermisosSubDir_User({idUser:t.IdUser}),this.$alertify.success("Permiso "+t.NomPer+" eliminado para "+t.NomItem)}catch(e){this.$alertify.error("Fallo en la solicitud eliminar Item "+e)}}},computed:{...(0,v.Se)("Permisos",["getPermisos","getPermisosSubDir_User"]),...(0,v.Se)("SubCarpetas",["getSubCarpetas"])}},Be=Te,Fe=(0,l.Z)(Be,ke,$e,!1,null,null,null),Re=Fe.exports,ze={data:()=>({show:!1,itemSeleccionadoUsuario:{},permisoInit:{},imgAux:a(2315)}),props:["id","correo","nombre","apellido","contraseña","idRol","rol","idCarreras","carreras","idPermisos","permisos","urlDw"],methods:{...(0,v.OI)("Dialogo",["setDialog","setDialogPermisos"]),...(0,v.OI)("Usuarios",["setUser"]),...(0,v.OI)("Permisos",["setPermisosUsuario"]),...(0,v.nv)("Usuarios",["eliminarUsuario"]),...(0,v.nv)("Permisos",["cargarPermisosSubDir_User"]),...(0,v.nv)("Carreras",["cargarCarrerasUser"]),editar:async function(t){this.setDialog(!0),await this.cargarCarrerasUser(this.id),this.itemSeleccionadoUsuario={id:this.id,correo:this.correo,"contraseña":this.contraseña,nombre:this.nombre,apellido:this.apellido,rol:this.idRol,carreras:this.devolverCarreras(),urlDw:this.urlDw},this.setUser(this.itemSeleccionadoUsuario)},devolverCarreras(){const t=[];for(let e=0;e<this.idCarreras.length;e++)","!==this.idCarreras[e]&&t.push(this.idCarreras[e]);return t},eliminar(){this.itemSeleccionadoUsuario={id:this.id,nombre:this.nombre,apellido:this.apellido},this.$alertify.confirm("Deseas eliminar el usuario: "+this.itemSeleccionadoUsuario.nombre+" "+this.itemSeleccionadoUsuario.apellido,(()=>{this.eliminarUsuario(this.itemSeleccionadoUsuario),this.$alertify.success("Usuario  Eliminado")}),(()=>this.$alertify.error("cancel")))},asignarPermisos:async function(){try{await this.cargarPermisosSubDir_User({idUser:this.id}),this.permisoInit={IdRelacion:0,IdUserPer:this.id,IdPerPer:[],IdItemSubPer:0},this.setPermisosUsuario(this.permisoInit),this.setDialogPermisos(!0)}catch(t){this.$alertify.error("Error en la solicitud asignar permisos "+t)}}},components:{PermisosUser:Re},computed:{...(0,v.rn)("Dialogo",["dailogPermisos"]),...(0,v.rn)("Permisos",["dataPermisosUsuario"])}},Le=ze,Je=(0,l.Z)(Le,Ne,Oe,!1,null,null,null),Ze=Je.exports,je={name:"Usuariosview",data(){return{btnOP:[{icon:"account-plus-outline",text:"Crear Usuario"}]}},created(){const t="true"===localStorage.getItem("Authentication");t?this.cargarUsuarios():this.$router.push("/")},methods:{...(0,v.nv)("Usuarios",["cargarUsuarios"])},computed:{...(0,v.Se)("Usuarios",["getItems"])},components:{UsuariosT:Ze,BtnOpciones:Zt}},Me=je,Ve=(0,l.Z)(Me,De,xe,!1,null,null,null),We=Ve.exports,Ge=function(){var t=this,e=t._self._c;return e("div",[e("BtnOpciones",{staticClass:"mb-2",staticStyle:{display:"none"},attrs:{links:t.btnOP,dark:""}}),e("Carreras")],1)},qe=[],He=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticStyle:{"margin-bottom":"40px"}},[e("NuevaCarrera",{attrs:{dialog:t.dailogCarreras,ItemCarrera:t.nuevaCarrera}})],1),[e("v-card",[e("v-card-title",[t._v(" "+t._s(t.Titulo)+" "),e("v-spacer"),e("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),e("v-spacer"),e("v-btn",{attrs:{color:"primary"},on:{click:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"stop-",void 0,e.key,void 0)?null:t.agregarCarrera()}}},[t._v("Crear "),e("v-icon",{attrs:{right:""}},[t._v("mdi-school-outline")])],1)],1),t.getCarreras.length>0?e("v-data-table",{staticClass:"mt-4 elevation-1",attrs:{dense:"",headers:t.Cabecera,items:t.getCarreras,"item-per-page":5,search:t.search,serach:t.search},scopedSlots:t._u([{key:"item",fn:function({item:a}){return[e("tr",{staticClass:"myStyle"},[e("td",[e("v-icon",{staticClass:"mr-3",attrs:{color:"pink darken-1",size:"35"}},[t._v("mdi-school-outline")])],1),e("td",[t._v(t._s(a.NomCar))]),e("td",[e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:r,attrs:s}){return[e("v-icon",t._g(t._b({staticClass:"me-2",attrs:{color:"primary darken-2",size:"30"},on:{click:function(e){return e.stopPropagation(),t.editarItem(a)}}},"v-icon",s,!1),r),[t._v(" mdi-pencil ")])]}}],null,!0)},[e("span",[t._v("Editar")])]),e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:r,attrs:s}){return[e("v-icon",t._g(t._b({attrs:{color:"error darken-2",size:"30"},on:{click:function(e){return e.stopPropagation(),t.eliminarItem(a)}}},"v-icon",s,!1),r),[t._v(" mdi-delete ")])]}}],null,!0)},[e("span",[t._v("Eliminar")])])],1)])]}}],null,!1,3052673260)}):t._e()],1)]],2)},Ye=[],Ke=function(){var t=this,e=t._self._c;return e("v-row",{attrs:{justify:"center"}},[e("v-dialog",{attrs:{persistent:"",width:"400"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e("v-card",[e("v-card-title",[0==t.ItemCarrera.idCar?e("span",{staticClass:"text-h5"},[t._v("Nueva Carpeta")]):t._e(),e("v-spacer")],1),e("v-card-text",[e("v-container",[e("v-row",[e("v-col",{attrs:{cols:"12"}},[e("v-text-field",{attrs:{label:"Nombre*",rules:t.controles().controlNom,required:""},model:{value:t.ItemCarrera.nomCar,callback:function(e){t.$set(t.ItemCarrera,"nomCar",e)},expression:"ItemCarrera.nomCar"}})],1)],1)],1)],1),e("v-card-actions",[e("v-spacer"),e("v-btn",{attrs:{color:"secondary",variant:"text"},on:{click:function(e){return t.cerrarDialog()}}},[t._v(" Close ")]),e("v-btn",{attrs:{color:"primary",variant:"text"},on:{click:function(e){return t.agregar()}}},[t._v(" Save ")])],1)],1)],1)],1)},Qe=[],Xe={name:"NuevaCarrera",props:{dialog:Boolean,ItemCarrera:{}},methods:{...(0,v.OI)("Dialogo",["setDialogCarreras"]),...(0,v.nv)("Carreras",["agregarCarrera","crearCarpetaCarrera"]),controles(){return{controlNom:[t=>{if(!t)return"Ingrese un nombre";const e=/^[a-zA-Z\s]+$/;return e.test(t)||"Ingrese solo letras"}]}},agregar:async function(){try{if(""!=this.ItemCarrera.nomCar){let t=await this.crearCarpetaCarrera({path:this.itemsBread[0],datos:this.ItemCarrera,oldPath:this.rutaAnterior});t?(await this.agregarCarrera(this.ItemCarrera),this.$alertify.success(`Carrera ${this.ItemCarrera.nomCar} insertada`)):this.$alertify.error(`No se pudo insertar la carrera ${this.ItemCarrera.nomCar}`),this.cerrarDialog()}else this.$alertify.error("Complete los campos para continuar")}catch(t){console.error("Error al agregar carrera:",t),this.$alertify.error("Error al realizar la operación "+t)}},cerrarDialog(){this.setDialogCarreras(!1)}},computed:{...(0,v.Se)("Carreras",["getSmsCar"]),...(0,v.rn)("Server_Carpetas",["rutaAnterior"]),...(0,v.rn)("Dialogo",["itemsBread"])}},ta=Xe,ea=(0,l.Z)(ta,Ke,Qe,!1,null,null,null),aa=ea.exports,ra={name:"Carreras",data(){return{search:"",path:"",nuevaCarrera:{},Titulo:"CARRERAS FISEI",Cabecera:[{text:"Tipo",value:"tipo"},{text:"Carrera",value:"NomCar"},,{text:"ACCIONES",value:"acciones"}]}},methods:{...(0,v.OI)("Dialogo",["setDialogCarreras"]),...(0,v.nv)("Carreras",["eliminarCarrera"]),...(0,v.nv)("Server_Carpetas",["eliminarCarpeta"]),...(0,v.OI)("Server_Carpetas",["setRutaAnterior"]),agregarCarrera(){this.nuevaCarrera={idCar:0,nomCar:""},this.setDialogCarreras(!0)},editarItem(t){this.nuevaCarrera={idCar:t.IdCar,nomCar:t.NomCar},this.setDialogCarreras(!0),this.setRutaAnterior(this.itemsBread[0]+"/"+t.NomCar.trim()),this.path=""},eliminarItem(t){this.$alertify.confirm("Deseas eliminar la Carrera: "+t.NomCar+", Se borrara permanentemente los datos",(()=>{this.eliminarCarrera(t);let e=this.eliminarCarpeta({ruta1:"",ruta2:this.itemsBread[0]+"/"+t.NomCar});e?this.$alertify.success("Carrera "+t.NomCar+" Eliminado"):this.$alertify.error("No se pudo eliminar la carrera "+t.NomCar),this.path=""}),(()=>this.$alertify.error("Cancelado")))},rutaNueva(){for(let t=0;t<this.itemsBread.length;t++)this.path+=this.itemsBread[t]+"/"}},components:{NuevaCarrera:aa},computed:{...(0,v.Se)("Carreras",["getCarreras"]),...(0,v.rn)("Carreras",["smsCar"]),...(0,v.rn)("Dialogo",["itemsBread","dailogCarreras"])}},sa=ra,ia=(0,l.Z)(sa,He,Ye,!1,null,null,null),oa=ia.exports,na={name:"Usuariosview",created(){const t="true"===localStorage.getItem("Authentication");t?this.cargarUsuarios():this.$router.push("/")},data(){return{btnOP:[{icon:"school-outline",text:"Crear Carreras"}]}},created(){},methods:{},computed:{},components:{Carreras:oa,BtnOpciones:Zt}},la=na,ca=(0,l.Z)(la,Ge,qe,!1,null,null,null),da=ca.exports,ua=function(){var t=this,e=t._self._c;return e("div",[e("CarpetasVacias")],1)},ma=[],ha=function(){var t=this,e=t._self._c;return e("div",[[e("v-card",{directives:[{name:"show",rawName:"v-show",value:!0,expression:"true"}]},[e("v-card-title",[t._v(" "+t._s(t.Titulo)+" "),e("v-spacer"),e("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"search","single-line":"","hide-details":""},model:{value:t.searchInput,callback:function(e){t.searchInput=e},expression:"searchInput"}}),e("v-spacer")],1),t.getNotificaciones.length>0?e("v-data-table",{staticClass:"elevation-1",attrs:{dense:"",headers:t.Cabecera,items:t.getNotificaciones,"item-per-page":10,search:t.search},scopedSlots:t._u([{key:"item",fn:function({item:a}){return[e("tr",{staticClass:"myStyle"},[e("td",[e("v-icon",{staticClass:"mr-3",attrs:{color:"yellow darken-1"}},[t._v("mdi-folder")])],1),e("td",[t._v(t._s(a.carVacia))])])]}}],null,!1,2111953091)}):e("p",{staticClass:"text-center"},[t._v("Esperando datos...")])],1)]],2)},pa=[],ga={name:"carVacias",data(){return{search:"/UTA/FISEI/CARRERAS/",searchInput:"",Titulo:"Reportes de Carpetas Vacias",Cabecera:[{text:"Tipo",value:"tipo"},{text:"Ruta",value:"carVacia"}]}},computed:{...(0,v.Se)("Notificaciones",["getNotificaciones"])},watch:{searchInput(t){this.search=t}}},va=ga,Ca=(0,l.Z)(va,ha,pa,!1,null,null,null),fa=Ca.exports,ba={data(){return{}},async created(){const t="true"===localStorage.getItem("Authentication");if(t){const t=JSON.parse(localStorage.getItem("user"));this.idUser=t.IdUser,await this.notificaciones({idUser:this.idUser})}else this.$router.push("/")},methods:{...(0,v.nv)("Notificaciones",["notificaciones"])},components:{CarpetasVacias:fa}},Pa=ba,Ia=(0,l.Z)(Pa,ua,ma,!1,null,null,null),Sa=Ia.exports,ya=function(){var t=this,e=t._self._c;return e("v-container",[e("div",{staticStyle:{display:"flex",margin:"auto"}},[e("v-row",{staticClass:"fill-height",attrs:{justify:"center",align:"center"}},[e("v-col",{attrs:{cols:"12",sm:"8",md:"6"}},[e("v-card",{attrs:{elevation:"3"}},[e("v-card-title",{staticClass:"text-h6"},[t._v(" Sin conexión a Internet ")]),e("v-card-subtitle",[t._v(" Por favor, verifica tu conexión y vuelve a intentarlo. ")]),e("v-card-actions",[e("v-btn",{attrs:{color:"black"},on:{click:t.retryConnection}},[t._v(" Reintentar ")])],1)],1)],1)],1)],1)])},Aa=[],wa={methods:{retryConnection(){window.location.reload()}}},Ea=wa,_a=(0,l.Z)(Ea,ya,Aa,!1,null,"651a0b3f",null),Ua=_a.exports;r["default"].use(u.ZP);const Da=[{path:"/",component:_},{path:"/SinConexion",name:"SinConexion",component:Ua},{path:"/Dashboard",component:K,children:[{path:"/Estudiantes",name:"Estudiantes",component:ve},{path:"/Carreras",name:"Carreras",component:da},{path:"/Plantillas",name:"Plantillas",component:Ue},{path:"/Usuarios",name:"Usuarios",component:We},{path:"/Reportes",name:"Reportes",component:Sa}]}],xa=new u.ZP({mode:"history",base:"/",routes:Da});var Na=xa;const Oa="http://localhost/";r["default"].use(v.ZP);var ka={namespaced:!0,state:{user:null,isAuthenticated:!1,sms:""},getters:{getUser(t){return t.user},getAuthentication(t){return t.isAuthenticated},getSms(t){t.sms}},mutations:{setUser(t,e){t.user=e},setAuthentication(t,e){t.isAuthenticated=e},setSms(t,e){t.sms=e}},actions:{async login({commit:t,state:e},{user:a,pass:r}){try{const e=new FormData;e.append("user",a),e.append("pass",r);const s={method:"POST",body:e},i=`${Oa}Apis-UTA/Login.php`,o=await fetch(i,s);if(o.ok){const e=await o.json(),s=e[0];console.log(s),a.toLowerCase()===s.Correo.toLowerCase()&&r===s.Contraseña?(t("setAuthentication",!0),t("setUser",s),t("setSms","correcto"),localStorage.setItem("Authentication",!0),localStorage.setItem("user",JSON.stringify(s))):t("setSms","incorrecto")}else t("setSms","incorrecto")}catch(s){console.log("Error de Autenticacion:"+s)}},validarCorreo:async function({commit:t,state:e},{correo:a}){try{const t=new FormData;t.append("correo",a);const e={method:"POST",body:t},r=`${Oa}Apis-UTA/validarCorreo.php`,s=await fetch(r,e);if(s.ok){const t=await s.json();return"existe"==t}}catch(r){throw console.error("Error en la solicitud:",r),r}},"cambioContraseñaCorreo":async function({commit:t,state:e},{correo:a,newPass:r}){try{const t=new FormData;t.append("correo",a),t.append("Contraseña",r);const e={method:"POST",body:t},s=`${Oa}Apis-UTA/cambioContrasena.php`,i=await fetch(s,e);if(i.ok){const t=await i.json();return"contraseña Actualizada"==t.message}}catch(s){throw console.error("Error en la solicitud:",s),s}}}};r["default"].use(v.ZP);var $a={namespaced:!0,state:{Items:[],dataUsuario:{}},getters:{getItems(t){return t.Items}},mutations:{llenarItems(t,e){t.Items=e},setUser(t,e){t.dataUsuario=e}},actions:{cargarUsuarios:async function({commit:t}){try{const e={methods:"GET"},a=`${Oa}Apis-UTA/usuariosSelect.php`,r=await fetch(a,e),s=await r.json();t("llenarItems",s)}catch(e){}},AgregarUsuario:async function({commit:t,dispatch:e},a){console.log(a);try{const t=new FormData;t.append("id",a.id),t.append("nombre",a.nombre),t.append("apellido",a.apellido),t.append("contraseña",a.contraseña),t.append("idRol",a.rol),t.append("correo",a.correo);const s={method:"POST",body:t};var r="";r=0==a.id?`${Oa}Apis-UTA/insetarUsuario.php`:`${Oa}Apis-UTA/actualizarUsuario.php`;const i=await fetch(r,s),o=await i.text();if(o.startsWith("{")){JSON.parse(o);e("cargarUsuarios")}else e("cargarUsuarios")}catch(s){console.error("Error en la solicitud:",s)}},AgregarUsuarioCarreras:async function({commit:t,dispatch:e},{idU:a,cars:r}){for(let o=0;o<r.length;o++)try{const t=new FormData;t.append("userPer",a),t.append("carNew",r[o]);const i={method:"POST",body:t};var s=`${Oa}Apis-UTA/insertCarrerasSecre.php`;const n=await fetch(s,i),l=await n.text();if(l.startsWith("{")){JSON.parse(l);e("cargarUsuarios")}else e("cargarUsuarios")}catch(i){console.error("Error en la solicitud:",i)}},eliminarUsuario:async function({commit:t,dispatch:e},a){try{const t=new FormData;t.append("id",a.id);const r={method:"POST",body:t},s=`${Oa}Apis-UTA/eliminarUsuario.php`,i=await fetch(s,r),o=await i.text();if(o.startsWith("{")){JSON.parse(o);e("cargarUsuarios")}else e("cargarUsuarios")}catch(r){console.log("Error de eliminción "+r)}},eliminarCarrerasSecre:async function({commit:t,dispatch:e},{id:a,idCar:r}){try{const t=new FormData;t.append("id",a),t.append("idCar",r);const s={method:"POST",body:t},i=`${Oa}Apis-UTA/eliminarCarreraSecre.php`,o=await fetch(i,s),n=await o.text();if(n.startsWith("{")){JSON.parse(n);e("cargarUsuarios")}else e("cargarUsuarios")}catch(s){console.log("Error de eliminción "+s)}}},modules:{}};r["default"].use(v.ZP);var Ta={namespaced:!0,state:{carreras:[],carrerasUser:[],carreraSelecionada:"",idCarreraSelect:0,smsCar:""},getters:{getCarreras(t){return t.carreras},getCarrerasUser(t){return t.carrerasUser},getSmsCar(t){return t.smsCar}},mutations:{llenarCarreras(t,e){t.carreras=e},llenarCarrerasUser(t,e){t.carrerasUser=e},setCarreraSelect(t,e){t.carreraSelecionada=e},setIdCarreraSelect(t,e){t.idCarreraSelect=e},setSmsCar(t,e){t.smsCar=e}},actions:{cargarCarreras:async function({commit:t}){try{const e={methods:"GET"},a=`${Oa}Apis-UTA/carreras.php`,r=await fetch(a,e),s=await r.json();t("llenarCarreras",s)}catch(e){console.error("Error en la solicitud:",e)}},cargarCarrerasUser:async function({commit:t},e){try{const a=new FormData;a.append("IdUser",e);const r={method:"POST",body:a},s=`${Oa}Apis-UTA/carrerasUsuarios.php`,i=await fetch(s,r),o=await i.json();t("llenarCarrerasUser",o)}catch(a){console.error("Error en la solicitud:",a)}},agregarCarrera:async function({commit:t,dispatch:e},a){if(""!=a.nomCar)try{const t=new FormData;t.append("idCarrera",a.idCar),t.append("NomCarrera",a.nomCar);const r={method:"POST",body:t};let s="";s=0==a.idCar?`${Oa}Apis-UTA/InsetarCarrera.php`:`${Oa}Apis-UTA/editarCarrera.php`;const i=await fetch(s,r);if(i.ok){const t=await i.text();if(t.startsWith("{")){JSON.parse(t);return e("cargarCarreras"),!0}return e("cargarCarreras"),!0}return!1}catch(r){console.error("Error en la solicitud:",r)}},crearCarpetaCarrera:async function({commit:t,dispatch:e},{path:a,datos:r,oldPath:s}){try{const t=new FormData;t.append("nuevoNombreDirectorio",a.toUpperCase()+"/"+r.nomCar.toUpperCase()),t.append("nombreDirectorio",s.toUpperCase());const o={method:"POST",body:t};var i="";i=0==r.idCar?`${Oa}Apis-UTA/crearCarpetas.php`:`${Oa}Apis-UTA/actualizarCarpetaServidor.php`;const n=await fetch(i,o),l=await n.text();if(l.startsWith("{")){JSON.parse(l);return e("cargarCarreras"),!0}return e("cargarCarreras"),!0}catch(o){return!1}},eliminarCarrera:async function({commit:t,dispatch:e},a){if(a.IdCar>0)try{const r=new FormData;r.append("IdCarrera",a.IdCar);const s={method:"POST",body:r},i=`${Oa}Apis-UTA/eliminarCarrera.php`,o=await fetch(i,s);if(o.ok){const a=await o.text();if(a.startsWith("{")){JSON.parse(a);t("setSmsCar","eliminado"),e("cargarCarreras")}else t("setSmsCar","eliminado"),e("cargarCarreras")}}catch(r){console.error("Error en la solicitud:",r)}}},modules:{}};r["default"].use(v.ZP);var Ba={namespaced:!0,state:{roles:[]},getters:{getRoles(t){return t.roles}},mutations:{llenarRoles(t,e){t.roles=e}},actions:{cargarRoles:async function({commit:t}){try{const e={methods:"GET"},a=`${Oa}Apis-UTA/roles.php`,r=await fetch(a,e),s=await r.json();t("llenarRoles",s)}catch(e){}}},modules:{}};r["default"].use(v.ZP);var Fa={namespaced:!0,state:{dialogUser:!1,dialogFolder:!1,dailogPlantilla:!1,dailogCarpeta:!1,dailogPermisos:!1,dailogProgres:!1,dailogCarreras:!1,dailogContra:!1,dailogCarpetas:!1,dailogCrearEst:!1,dailogPermisos:!1,dailogSubirArch:!1,dailogPlantillaProgress:!1,dailogCargarDatos:!1,dailogEliminar:!1,mostrarCrear:!1,tablaEst:!1,tablaArch:!1,carreras:!0,ctlSubirArch:!1,ctlfolder:!1,itemsBread:["CARRERAS"]},mutations:{setDialog(t,e){t.dialogUser=e},setDialogFolder(t,e){t.dialogFolder=e},setDialogPlantilla(t,e){t.dailogPlantilla=e},setDialogCarpeta(t,e){t.dailogCarpeta=e},setDialogPermisos(t,e){t.dailogPermisos=e},setDialogProgres(t,e){t.dailogProgres=e},setDialogCarreras(t,e){t.dailogCarreras=e},setDailogContra(t,e){t.dailogContra=e},setDailogCarpetas(t,e){t.dailogCarpetas=e},setDailogPermisos(t,e){t.dailogPermisos=e},setDailogSubirArch(t,e){t.dailogSubirArch=e},setDailogPlantillaProgress(t,e){t.dailogPlantillaProgress=e},setDailogCargarDatos(t,e){t.dailogCargarDatos=e},setMostrarCrear(t,e){t.mostrarCrear=e},setDailogCrearEst(t,e){t.dailogCrearEst=e},setDailogEliminar(t,e){t.dailogEliminar=e},setVentanaEst(t,e){t.tablaEst=e},setVentanaArch(t,e){t.tablaArch=e},setVentanaCarreras(t,e){t.carreras=e},setCtlSubirArch(t,e){t.ctlfolder=e},setCtlfolder(t,e){t.ctlSubirArch=e},setBreadcrumbs(t,e){if(""==e)t.itemsBread.splice(1,t.itemsBread.length);else{const a=t.itemsBread.find((t=>t==e));if(a){let a=t.itemsBread.indexOf(e);t.itemsBread.splice(a+1,t.itemsBread.length)}else t.itemsBread.push(e)}}}};r["default"].use(v.ZP);var Ra={namespaced:!0,state:{permisos:[],permisosDirectorios:[],permisosSubDir_User:[],permisosSubDirectorios:new Map,dataPermisosUsuario:{}},getters:{getPermisos(t){return t.permisos},getPermisosDirectorios(t){return t.permisosDirectorios},getPermisosSubDir_User(t){return t.permisosSubDir_User}},mutations:{llenarPermisos(t,e){t.permisos=e},llenarPermisosDirectorios(t,e){t.permisosDirectorios=e},llenarPermisosSubDir_User(t,e){t.permisosSubDir_User=e},setPermisosSubDirectorios(t,e){t.permisosSubDirectorios=e},setPermisosUsuario(t,e){t.dataPermisosUsuario=e}},actions:{cargarPermisos:async function({commit:t}){try{const e={methods:"GET"},a=`${Oa}Apis-UTA/permisos.php`,r=await fetch(a,e),s=await r.json();t("llenarPermisos",s)}catch(e){console.error("Error en la solicitud:",e)}},cargarPermisosDirectorios:async function({commit:t},{idUser:e,nomItem:a}){try{const r=new FormData;r.append("IdUser",e),r.append("NomItem",a);const s={method:"POST",body:r},i=`${Oa}Apis-UTA/permisosDirectorios.php`,o=await fetch(i,s);if(!o.ok)throw new Error(`Error en la solicitud: ${o.statusText}`);const n=await o.json();t("llenarPermisosDirectorios",n)}catch(r){throw console.error("Error en la solicitud:",r),r}},cargarPermisosSubDir_User:async function({commit:t},{idUser:e}){try{const a=new FormData;a.append("IdUser",e);const r={method:"POST",body:a},s=`${Oa}Apis-UTA/permisosSubDirectorios_User.php`,i=await fetch(s,r),o=await i.json();t("llenarPermisosSubDir_User",o)}catch(a){console.error("Error en la solicitud:",a)}},AgregarUsuarioPermisos:async function({commit:t,dispatch:e},a){var r=0;while(r<a.IdPerPer.length){try{const t=new FormData;t.append("userPer",a.IdUserPer),t.append("perPer",a.IdPerPer[r]),t.append("itemSub",a.IdItemSubPer);const e={method:"POST",body:t};var s="";s=0==a.IdRelacion?`${Oa}Apis-UTA/insertarPermisosUser.php`:`${Oa}Apis-UTA/actualizarPermisosUser.php`;const i=await fetch(s,e),o=await i.text();if(o.startsWith("{")){JSON.parse(o)}}catch(i){console.error("Error en la solicitud:",i)}r++}},AgregarUsuarioPermisosCarpeta:async function({commit:t,dispatch:e},a){try{const t=new FormData;t.append("userPer",a.IdUserPer),t.append("perPer",a.IdPerPer),t.append("itemSub",a.IdItemSubPer);const e={method:"POST",body:t};var r=`${Oa}Apis-UTA/insertarPermisosNew.php`;const s=await fetch(r,e);if(console.log("DATA "+s),s.ok){const t=await s.json();return console.log("Josn "+t),"Permiso Insertado..."==t}}catch(s){console.error("Error en la solicitud:",s)}},eliminarPermisosSub_User:async function({commit:t,dispatch:e},{idUser:a,idPer:r,idItem:s}){try{const t=new FormData;t.append("userPer",a),t.append("perPer",r),t.append("itemSub",s);const i={method:"POST",body:t},o=`${Oa}Apis-UTA/eliminarPermisosSub_User.php`,n=await fetch(o,i),l=await n.text();if(l.startsWith("{")){JSON.parse(l);e("cargarPermisosSubDir_User",a)}else e("cargarPermisosSubDir_User",a)}catch(i){console.error("Error de eliminción "+i)}}},modules:{}};r["default"].use(v.ZP);var za={namespaced:!0,state:{Items:[],dataEst:{},buscarEst:"",idEst:""},getters:{getItems(t){return t.Items},getEstCed(t){return t.buscarEst}},mutations:{llenarItems(t,e){t.Items=e},setEst(t,e){t.dataEst=e},setIdEst(t,e){t.idEst=e},setBuscarEst(t,e){t.buscarEst=e}},actions:{cargarEstudiantes:async function({commit:t,rootState:e},{idCar:a,idUser:r}){try{const e=new FormData;e.append("IdUser",r),e.append("IdCar",a);const s={method:"POST",body:e},i=`${Oa}Apis-UTA/estudiantesSelect.php`,o=await fetch(i,s),n=await o.json();o.ok?t("llenarItems",n):console.log("La respuesta no es un JSON válido:",await o.text())}catch(s){console.error("Error en la solicitud:",s)}},buscarEstCedula:async function({commit:t,rootState:e},{cedula:a}){try{const t=new FormData;t.append("cedEst",a);const e={method:"POST",body:t},r=`${Oa}Apis-UTA/buscarEstCedula.php`,s=await fetch(r,e);if(s.ok){const t=await s.json();return"existe"==t}return console.log("La respuesta no es un JSON válido:",await s.text()),!1}catch(r){console.error("Error en la solicitud:",r)}},AgregarEstudiante:async function({commit:t,dispatch:e},a){try{const t=new FormData;t.append("IdEst",a.IdEst),t.append("NomEst",a.NomEst),t.append("ApeEst",a.ApeEst),t.append("CedEst",a.Cedula),t.append("Fecha",a.Fecha),t.append("NomModificador",a.NomModificador),t.append("IdCarPer",a.NomCar),t.append("IdPlanPer",a.idPlanPer);const e={method:"POST",body:t};var r="";r=0==a.IdEst?`${Oa}Apis-UTA/insertarEstudiantes.php`:`${Oa}Apis-UTA/actualizarEstudiante.php`;const s=await fetch(r,e),i=await s.text();if(i.startsWith("{")){JSON.parse(i)}}catch(s){console.error("Error en la solicitud:",s)}},eliminarEstudiante:async function({commit:t,dispatch:e},a){try{const t=new FormData;t.append("idEst",a.IdEst);const e={method:"POST",body:t},r=`${Oa}Apis-UTA/eliminarEstudiante.php`,s=await fetch(r,e),i=await s.text();if(i.startsWith("{")){JSON.parse(i)}}catch(r){console.log("Error de eliminción "+r)}}},modules:{}};r["default"].use(v.ZP);var La={namespaced:!0,state:{listCarpetas:[],rutaAnterior:"",dataCarpeta:{}},getters:{getCarpetas(t){return t.listCarpetas}},mutations:{llenarlista(t,e){t.listCarpetas=e},setRutaAnterior(t,e){t.rutaAnterior=e},setCarpeta(t,e){t.dataCarpeta=e}},actions:{cargarCarpetas:async function({commit:t},e){if(e)try{const a=new FormData;a.append("rutaServidor",e.toUpperCase());const r={method:"POST",body:a},s=`${Oa}Apis-UTA/Dir_ArchSelect.php`,i=await fetch(s,r);if(i.ok){const e=await i.text();if(e.startsWith("{")){const a=JSON.parse(e);t("llenarlista",a)}else{const a=JSON.parse(e),r=a.error;t("llenarlista",r),alert(r)}}}catch(a){console.error("Error en la solicitud:",a),t("setErrorCargaCarpetas","Error al cargar las carpetas: "+a.message)}},crearCarpeta:async function({commit:t,dispatch:e},{datos:a,path:r,oldPath:s}){try{const t=new FormData,o=r+a.NomEst.toUpperCase()+" "+a.ApeEst.toUpperCase(),n=o.indexOf(".");n<0?(""==a.ApeEst?(console.log("just folder"),t.append("nuevoNombreDirectorio",r+a.NomEst.toUpperCase())):t.append("nuevoNombreDirectorio",r+a.NomEst.toUpperCase()+" "+a.ApeEst.toUpperCase()),t.append("nombreDirectorio",s.toUpperCase())):(t.append("nuevoNombreDirectorio",r+a.NomEst),t.append("nombreDirectorio",s));const l={method:"POST",body:t};var i="";i=0==a.IdEst?`${Oa}Apis-UTA/crearCarpetas.php`:`${Oa}Apis-UTA/actualizarCarpetaServidor.php`;const c=await fetch(i,l),d=await c.text();if(d.startsWith("{")){JSON.parse(d);console.log("json"),e("cargarCarpetas",r)}else console.log("Text"),e("cargarCarpetas",r)}catch(o){console.error("Error en la solicitud:",o)}},crearSubCarpeta:async function({commit:t,dispatch:e},{datos:a,path:r,nombre:s}){try{const t=new FormData;t.append("nuevoNombreDirectorio",r.toUpperCase()+a.NomEst.toUpperCase()+" "+a.ApeEst.toUpperCase()+"/"+s.toUpperCase());const i={method:"POST",body:t},o=`${Oa}Apis-UTA/crearCarpetas.php`,n=await fetch(o,i),l=await n.text();if(l.startsWith("{")){JSON.parse(l);console.log("json"),e("cargarCarpetas",r)}else console.log("Text"),e("cargarCarpetas",r)}catch(i){console.error("Error en la solicitud:",i)}},eliminarCarpeta:async function({commit:t,dispatch:e},{ruta1:a,ruta2:r,tipo:s}){try{const t=new FormData;"Archivo"==s?t.append("rutaServidor",r):t.append("rutaServidor",r.toUpperCase());const i={method:"POST",body:t},o=`${Oa}Apis-UTA/eliminarCarpetaServidor.php`,n=await fetch(o,i),l=await n.text();if(l.startsWith("{")){JSON.parse(l);return e("cargarCarpetas",a),!0}return e("cargarCarpetas",a),!0}catch(i){console.log("Error de eliminción "+i)}},descargarCarpeta:async function({commit:t,dispatch:e},{ruta:a,nombre:r}){try{const t=new FormData;t.append("rutaRemota",a+r.toUpperCase().trim());const e={method:"POST",body:t},s=`${Oa}Apis-UTA/descargarCarpetas.php`,i=await fetch(s,e);i.ok}catch(s){console.error("Error en la solicitud:",s)}}}};r["default"].use(v.ZP);var Ja={namespaced:!0,state:{listArchivos:null,dataObsArch:{},observacion:""},getters:{getArchivos(t){return t.listArchivos},getObs(t){return t.observacion}},mutations:{llenarlista(t,e){t.listArchivos=e},cargarObs(t,e){t.observacion=e},setObsArch(t,e){this.state=e}},actions:{cargarArchivos:async function({commit:t}){try{const e={methods:"GET"},a="",r=await fetch(a,e),s=await r.json();t("cargarObs",s)}catch(e){console.error("Error en la solicitud:",e)}},cargarObsArchivos:async function({commit:t},{rutaObs:e}){try{const a=new FormData;a.append("rutaObs",e);const r={method:"POST",body:a},s=`${Oa}Apis-UTA/obsArchSelect.php`,i=await fetch(s,r),o=await i.json();i.ok?t("cargarObs",o):t("cargarObs","La respuesta no es un JSON válido:")}catch(a){console.error("Error en la solicitud:",a)}},crearArchivos:async function({commit:t,dispatch:e},{ruta:a,archivo:r}){try{const t=new FormData;t.append("rutaRemota",a),t.append("file",r);const e={method:"POST",body:t},s=`${Oa}Apis-UTA/crearArchivos.php`,i=await fetch(s,e),o=await i.text();if(o.startsWith("{")){JSON.parse(o)}}catch(s){console.error("Error en la solicitud:",s)}},crearObsArchivos:async function({commit:t,dispatch:e},{ruta:a,observacion:r,idEstPer:s}){try{const t=new FormData;t.append("RutaArchivo",a),t.append("Observacion",r),t.append("IdEstPer",s);const e={method:"POST",body:t},i=`${Oa}Apis-UTA/insertarObsArch.php`,o=await fetch(i,e),n=await o.text();if(n.startsWith("{")){JSON.parse(n)}}catch(i){console.error("Error en la solicitud:",i)}},descargarArchivo:async function({commit:t},{ruta:e,nombre:a}){try{const t=new FormData;t.append("rutaRemota",e);const r={method:"POST",body:t},s=`${Oa}Apis-UTA/descargarDir_Arch.php`,i=await fetch(s,r);if(i.ok){const t=await i.blob(),e=window.URL.createObjectURL(t),r=document.createElement("a");r.href=e,r.download=a,document.body.appendChild(r),r.click(),window.URL.revokeObjectURL(e)}}catch(r){console.error("Error en la solicitud:",r)}}}};r["default"].use(v.ZP);var Za={namespaced:!0,state:{Plantillas:[],ItemsPlantilla:[],ItemsPlantillaTiene:[],dataPlan:{},estudinates_Plantillas:[],idEstPlan:""},getters:{getPlantillas(t){return t.Plantillas},getItemsPlantillas(t){return t.ItemsPlantilla},getItemsPlantillasTiene(t){return t.ItemsPlantillaTiene},getEstudinates_Plantillas(t){return t.estudinates_Plantillas}},mutations:{llenarPlantillas(t,e){t.Plantillas=e},llenarItemsPlantillas(t,e){t.ItemsPlantilla=e},llenarItemsPlantillasTiene(t,e){t.ItemsPlantillaTiene=e},llenarEstudinates_Plantillas(t,e){t.estudinates_Plantillas=e},setPlan(t,e){t.dataPlan=e},setIdEstPlan(t,e){t.idEstPlan=e}},actions:{cargarPlantillas:async function({commit:t}){try{const e={method:"GET"},a=`${Oa}Apis-UTA/plantillasSelect.php`,r=await fetch(a,e),s=await r.json();r.ok?t("llenarPlantillas",s):console.log("La respuesta no es un JSON válido:",await r.text())}catch(e){console.error("Error en la solicitud:",e)}},cargarItemsPlantillas:async function({commit:t},e){try{const a=new FormData;a.append("idPlantilla",e.idPlanPer);const r={method:"POST",body:a},s=`${Oa}Apis-UTA/plantillasSelect.php`,i=await fetch(s,r),o=await i.json();i.ok?t("llenarItemsPlantillas",o):console.log("La respuesta no es un JSON válido:",await i.text())}catch(a){console.error("Error en la solicitud:",a)}},cargarItemsPlantillasTiene:async function({commit:t},{idPlan:e}){try{const a=new FormData;a.append("IdPlan",e);const r={method:"POST",body:a},s=`${Oa}Apis-UTA/ItemsPlantillaTiene.php`,i=await fetch(s,r),o=await i.json();i.ok?t("llenarItemsPlantillasTiene",o):console.log("La respuesta no es un JSON válido:",await i.text())}catch(a){console.error("Error en la solicitud:",a)}},cargarEstudinates_Plantillas:async function({commit:t},{idPlan:e}){try{const a=new FormData;a.append("IdPlanPer",e);const r={method:"POST",body:a},s=`${Oa}Apis-UTA/estudiantesPlantillaSelect.php`,i=await fetch(s,r),o=await i.json();i.ok?t("llenarEstudinates_Plantillas",o):console.log("La respuesta no es un JSON válido:",await i.text())}catch(a){console.error("Error en la solicitud:",a)}},AgregarPlantilla:async function({commit:t,dispatch:e},a){try{console.log(a.nomPlan.toUpperCase());const t=new FormData;t.append("NomPlantilla",a.nomPlan.toUpperCase());const e={method:"POST",body:t};var r="";r=0==a.idPlan?`${Oa}Apis-UTA/insetarPlantilla.php`:`${Oa}Apis-UTA/actualizarEstudiante.php`;const s=await fetch(r,e),i=await s.text();if(i.startsWith("{")){JSON.parse(i)}}catch(s){console.error("Error en la solicitud:",s)}},AgregarItemsSubDirectorios:async function({commit:t,dispatch:e},a){var r=0;while(r<a.items.length){try{const t=new FormData;t.append("NomSubDirectorio",a.items[r].toUpperCase());const e={method:"POST",body:t},s=`${Oa}Apis-UTA/insertarItemsSubdirectorios.php`,i=await fetch(s,e),o=await i.text();if(o.startsWith("{")){JSON.parse(o)}}catch(s){console.error("Error en la solicitud:",s)}r++}},AgregarItemsPalntilla:async function({commit:t,dispatch:e},a){var r=0;while(r<a.items.length){try{const t=new FormData;t.append("NomSubDirectorio",a.items[r].toUpperCase());const e={method:"POST",body:t},s=`${Oa}Apis-UTA/insertarItemsPlantilla.php`,i=await fetch(s,e),o=await i.text();if(o.startsWith("{")){JSON.parse(o)}}catch(s){console.error("Error en la solicitud:",s)}r++}},AgregarItemsDirectorios:async function({commit:t,dispatch:e},{datos:a,idPlan:r}){var s=0;while(s<a.items.length){try{const t=new FormData;t.append("NomItem",a.items[s].toUpperCase()),t.append("IdPlan",r);const e={method:"POST",body:t};var i="";i=(a.idPlan,`${Oa}Apis-UTA/insertarItemDirectorio.php`);const o=await fetch(i,e),n=await o.text();if(n.startsWith("{")){JSON.parse(n)}}catch(o){console.error("Error en la solicitud:",o)}s++}},AgregarMasItemsDirectorios:async function({commit:t,dispatch:e},{datos:a,idPlan:r}){var s=0;while(s<a.length){try{const t=new FormData;t.append("NomItem",a[s].toUpperCase()),t.append("IdPlan",r);const e={method:"POST",body:t};var i=`${Oa}Apis-UTA/insertarItemDirectorio.php`;const o=await fetch(i,e),n=await o.text();if(n.startsWith("{")){JSON.parse(n)}}catch(o){console.error("Error en la solicitud:",o)}s++}},eliminarPlantilla:async function({commit:t,dispatch:e},a){try{const t=new FormData;t.append("idEst",a.IdEst);const r={method:"POST",body:t},s=`${Oa}Apis-UTA/eliminarEstudiante.php`,i=await fetch(s,r),o=await i.text();if(o.startsWith("{")){JSON.parse(o);e("cargarPlantillas")}else e("cargarPlantillas")}catch(r){console.log("Error de eliminción "+r)}}},modules:{}};r["default"].use(v.ZP);var ja={namespaced:!0,state:{subCarpteas:[]},getters:{getSubCarpetas(t){return t.subCarpteas}},mutations:{llenarSubCarpetas(t,e){t.subCarpteas=e}},actions:{cargarSubCarpetas:async function({commit:t}){try{const e={methods:"GET"},a=`${Oa}Apis-UTA/subCarpetasSelect.php`,r=await fetch(a,e),s=await r.json();t("llenarSubCarpetas",s)}catch(e){console.error("Error en la solicitud:",e)}},actualizarSubCapeta:async function({commit:t,dispatch:e},{nomItem:a,nuevoItem:r}){try{const t=new FormData;t.append("nomItem",a.toUpperCase()),t.append("nuevoItem",r.toUpperCase());const i={method:"POST",body:t};var s=`${Oa}Apis-UTA/actualizarItemSubDir.php`;const o=await fetch(s,i);if(o.ok){const t=await o.json();return"SubCarpeta Actualizado"==t.message&&(e("cargarSubCarpetas"),!0)}}catch(i){console.error("Error en la solicitud:",i)}}},modules:{}};r["default"].use(v.ZP);var Ma={namespaced:!0,state:{notificaciones:[]},getters:{getNotificaciones(t){return t.notificaciones}},mutations:{setNotificaciones(t,e){t.notificaciones=e,console.log(t.notificaciones)}},actions:{notificaciones:async function({commit:t,state:e},{idUser:a}){try{const e=new FormData;e.append("IdUser",a);const r={method:"POST",body:e},s=`${Oa}Apis-UTA/carpetasVaciasServidor.php.`,i=await fetch(s,r);if(i.ok){const e=await i.text();if(e.startsWith("[")){const a=JSON.parse(e);t("setNotificaciones",a)}else t("setNotificaciones",e)}}catch(r){throw console.error("Error en la solicitud:",r),r}}}};r["default"].use(v.ZP);var Va=new v.ZP.Store({state:{},getters:{},mutations:{},actions:{},modules:{Login:ka,Usuarios:$a,Carreras:Ta,Roles:Ba,Dialogo:Fa,Permisos:Ra,Estudiantes:za,Server_Carpetas:La,Server_Archivos:Ja,Plantillas:Za,SubCarpetas:ja,Notificaciones:Ma}}),Wa=a(5464),Ga=a.n(Wa);a(8556);r["default"].use(Ga());var qa=new(Ga())({theme:{options:{customProperties:!0},themes:{light:{primary:"#007BFF",secondary:"#424242",accent:"#82B1FF",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"}}}}),Ha=a(5570);r["default"].use(Ha.Z),r["default"].config.productionTip=!1,new r["default"]({router:Na,store:Va,vuetify:qa,CryptoJS:f(),render:function(t){return t(d)}}).$mount("#app")},1637:function(t,e,a){"use strict";t.exports=a.p+"img/logo2.de865c98.png"},6841:function(t,e,a){"use strict";t.exports=a.p+"img/plantilla.03bb7aaa.png"},2315:function(t,e,a){"use strict";t.exports=a.p+"img/user.8b282652.png"},2480:function(){}},e={};function a(r){var s=e[r];if(void 0!==s)return s.exports;var i=e[r]={exports:{}};return t[r].call(i.exports,i,i.exports,a),i.exports}a.m=t,function(){var t=[];a.O=function(e,r,s,i){if(!r){var o=1/0;for(d=0;d<t.length;d++){r=t[d][0],s=t[d][1],i=t[d][2];for(var n=!0,l=0;l<r.length;l++)(!1&i||o>=i)&&Object.keys(a.O).every((function(t){return a.O[t](r[l])}))?r.splice(l--,1):(n=!1,i<o&&(o=i));if(n){t.splice(d--,1);var c=s();void 0!==c&&(e=c)}}return e}i=i||0;for(var d=t.length;d>0&&t[d-1][2]>i;d--)t[d]=t[d-1];t[d]=[r,s,i]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var r in e)a.o(e,r)&&!a.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){a.p="/"}(),function(){var t={143:0};a.O.j=function(e){return 0===t[e]};var e=function(e,r){var s,i,o=r[0],n=r[1],l=r[2],c=0;if(o.some((function(e){return 0!==t[e]}))){for(s in n)a.o(n,s)&&(a.m[s]=n[s]);if(l)var d=l(a)}for(e&&e(r);c<o.length;c++)i=o[c],a.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return a.O(d)},r=self["webpackChunksistema_uta"]=self["webpackChunksistema_uta"]||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))}();var r=a.O(void 0,[998],(function(){return a(6514)}));r=a.O(r)})();
//# sourceMappingURL=app.f5d24876.js.map